<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://huyifu.github.io</id>
    <title>å¤æœˆçš„blog</title>
    <updated>2021-04-06T10:44:31.181Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://huyifu.github.io"/>
    <link rel="self" href="https://huyifu.github.io/atom.xml"/>
    <subtitle>Nothing for nothing
</subtitle>
    <logo>https://huyifu.github.io/images/avatar.png</logo>
    <icon>https://huyifu.github.io/favicon.ico</icon>
    <rights>All rights reserved 2021, å¤æœˆçš„blog</rights>
    <entry>
        <title type="html"><![CDATA[vueå­¦ä¹ ]]></title>
        <id>https://huyifu.github.io/post/vue-xue-xi/</id>
        <link href="https://huyifu.github.io/post/vue-xue-xi/">
        </link>
        <updated>2021-04-05T10:14:41.000Z</updated>
        <content type="html"><![CDATA[<p>Vueçš„è¯­æ³•åŠå…¶ä½¿ç”¨<br>
éœ€è¦å®ä¾‹åŒ–</p>
<pre><code>var vm = new Vue({
  // é€‰é¡¹
})
 var vm = new Vue({
        el: '#vue_det', è¿›è¡Œä¸idä¸ºvue_detçš„å…ƒç´ è¿›è¡Œç»‘å®š
        data: {    	//dataå®šä¹‰å±æ€§
            site: &quot;èœé¸Ÿæ•™ç¨‹&quot;, 
            url: &quot;www.runoob.com&quot;,
            alexa: &quot;10000&quot;
        },
        methods: {  	//methodså®šä¹‰å‡½æ•°
            details: function() {
                return  this.site + &quot; - å­¦çš„ä¸ä»…æ˜¯æŠ€æœ¯ï¼Œæ›´æ˜¯æ¢¦æƒ³ï¼&quot;;
            }
        }
    })
    ```
htmlï¼š
</code></pre>
<div id="vue_det">
    <h4>site : {{site}}</h4>
    <h4>url : {{url}}</h4>
    <h4>{{details()}}</h4>
</div>
```
é€šè¿‡ä½¿ç”¨ v-once æŒ‡ä»¤ï¼Œä½ ä¹Ÿèƒ½æ‰§è¡Œä¸€æ¬¡æ€§åœ°æ’å€¼ï¼Œå½“æ•°æ®æ”¹å˜æ—¶ï¼Œæ’å€¼å¤„çš„å†…å®¹ä¸ä¼šæ›´æ–°ã€‚ä½†è¯·ç•™å¿ƒè¿™ä¼šå½±å“åˆ°è¯¥èŠ‚ç‚¹ä¸Šçš„å…¶å®ƒæ•°æ®ç»‘å®šï¼š
```
<span v-once>è¿™ä¸ªå°†ä¸ä¼šæ”¹å˜: {{ msg }}</span>
```
æ¨¡æ¿è¯­æ³•
ä½¿ç”¨ v-html æŒ‡ä»¤ç”¨äºè¾“å‡º html ä»£ç ï¼š
```
 data: {
    message: '<h4>èœé¸Ÿæ•™ç¨‹</h4>'
  }
<pre><code>v-bindç”¨äºç»‘å®šæ•°æ®å’Œå…ƒç´ å±æ€§   v-bind:å±æ€§å=&quot; &quot;çš„æ ¼å¼ç®€å†™æˆ:å±æ€§å=&quot; &quot;
ä¾‹å¦‚
</code></pre>
<p>&lt; a :class=&quot;data1&quot; :href=&quot;url&quot;&gt;click me</a><br>
data:{<br>
url:&quot;https://www.baidu.com&quot;,<br>
data1: {active:isActive} //æ­¤å¤„ä¸ºä¸€ä¸ªå¯¹è±¡ ä¹Ÿå¯ä»¥è¿›è¡Œç»‘å®š<br>
}</p>
<pre><code>```
</code></pre>
<p>æŒ‡ä»¤ (Directives) æ˜¯å¸¦æœ‰ v- å‰ç¼€çš„ç‰¹æ®Š attributeã€‚æŒ‡ä»¤ attribute çš„å€¼é¢„æœŸæ˜¯å•ä¸ª JavaScript è¡¨è¾¾å¼</p>
<p v-if="seen">ç°åœ¨ä½ çœ‹åˆ°æˆ‘äº†</p>
è¿™é‡Œï¼Œv-if æŒ‡ä»¤å°†æ ¹æ®è¡¨è¾¾å¼ seen çš„å€¼çš„çœŸå‡æ¥æ’å…¥/ç§»é™¤ <p> å…ƒç´ ã€‚
<p>v-on æŒ‡ä»¤ï¼Œå®ƒç”¨äºç›‘å¬ DOM äº‹ä»¶ï¼š<br>
<a v-on:click="doSomething">...</a><br>
v-on:click =<br>
ç¼©å†™<br>
@click =<br>
@[event]  =<br>
åŠ¨æ€å‚æ•°</p>
<p>è®¡ç®—å±æ€§  dataé‡Œçš„computed å†™å…¥éœ€è¦è®¡ç®—çš„è¡¨è¾¾å¼</p>
<pre><code>&lt;div id=&quot;example&quot;&gt;
  &lt;p&gt;Original message: &quot;{{ message }}&quot;&lt;/p&gt;
  &lt;p&gt;Computed reversed message: &quot;{{ reversedMessage }}&quot;&lt;/p&gt;
&lt;/div&gt;
var vm = new Vue({
  el: '#example',
  data: {
    message: 'Hello'
  },
  computed: {
    // è®¡ç®—å±æ€§çš„ getter
    reversedMessage: function () {
      // `this` æŒ‡å‘ vm å®ä¾‹
      return this.message.split('').reverse().join('')
    }
  }
})
</code></pre>
<p>ä» 2.6.0 å¼€å§‹ï¼Œå¯ä»¥ç”¨æ–¹æ‹¬å·æ‹¬èµ·æ¥çš„ JavaScript è¡¨è¾¾å¼ä½œä¸ºä¸€ä¸ªæŒ‡ä»¤çš„å‚æ•°ï¼š<br>
v-bind:[attributeName]=&quot;url&quot;  å³dataä¸­attributeNameçš„å€¼ä½œä¸ºç»‘å®šçš„å±æ€§</p>
<h2 id="è®¡ç®—å±æ€§ç¼“å­˜-vs-æ–¹æ³•">è®¡ç®—å±æ€§ç¼“å­˜ vs æ–¹æ³•</h2>
<p>vue å®ä¾‹ ä¸­computed ä¸ methods éƒ½å¯ä»¥åŸºäºæŸä¸€ä¸ªdataè¿›è¡Œè¡¨è¾¾å¼çš„è¿ç®—</p>
<pre><code>methods: {
  reversedMessage: function () {
    return this.message.split('').reverse().join('')
  }
}
</code></pre>
<p>ä¸</p>
<pre><code>  computed: {
    // è®¡ç®—å±æ€§çš„ getter
    reversedMessage: function () {
      // `this` æŒ‡å‘ vm å®ä¾‹
      return this.message.split('').reverse().join('')
    }
  }
</code></pre>
<h3 id="ä¸¤è€…ç»“æœä¸€è‡´-ä½†æ˜¯è®¡ç®—å±æ€§æ˜¯åŸºäºå®ƒä»¬çš„å“åº”å¼ä¾èµ–è¿›è¡Œç¼“å­˜çš„">ä¸¤è€…ç»“æœä¸€è‡´ ä½†æ˜¯è®¡ç®—å±æ€§æ˜¯åŸºäºå®ƒä»¬çš„å“åº”å¼ä¾èµ–è¿›è¡Œç¼“å­˜çš„</h3>
<p>æ„å‘³ç€ å¦‚æœæ‰€ä¾èµ–çš„dataæ²¡æœ‰è¿›è¡Œæ›´æ”¹ è®¡ç®—å±æ€§ä¼šç«‹å³è¿”å›ä¹‹å‰çš„è®¡ç®—ç»“æœï¼Œè€Œä¸å¿…å†æ¬¡æ‰§è¡Œå‡½æ•°ã€‚  æ‰€æœ‰ä½¿ç”¨computedåœ¨æŸäº›æ—¶åˆ»å¯ä»¥æé«˜æ€§èƒ½<br>
å› ä¸ºæ•°æ®ç»‘å®š å’Œä¾èµ–å¼çš„æ›´æ–°  å¯ä»¥ä¸è¿›è¡Œç›‘å¬æ•°æ®</p>
<pre><code>var vm = new Vue({
  el: '#demo',
  data: {
    firstName: 'Foo',
    lastName: 'Bar'
  },
  computed: {
    fullName: function () {
      return this.firstName + ' ' + this.lastName
    }
  }
})
</code></pre>
<p>åœ¨firstName æˆ–è€… lastName æ›´æ”¹æ—¶å€™ fullNameè‡ªåŠ¨è¿›è¡Œæ›´æ”¹</p>
<p>computed  set ä¸get</p>
<pre><code> &lt;body&gt;
     &lt;div id=&quot;app&quot;&gt;
         {{fullName}}
     &lt;/div&gt;
    &lt;script&gt;
       var vm = new Vue({
           el: &quot;#app&quot;,
           data: {
               firstName:&quot;Ma&quot;,
               lastName:&quot;BinYan&quot;
           },
           computed:{
               fullName :{
                   get: function()
                   {return this.firstName+&quot; &quot;+this.lastName},
                  set : function(value)  //ä¿®æ”¹fullNameçš„å€¼æ—¶è§¦å‘
                  {
                      var array = value.split(&quot; &quot;);
                       this.firstName=array[0];
                       this.lastName=array[1];
                   }
               }
           }
       })
    &lt;/script&gt;
  &lt;/body&gt;
</code></pre>
<p>ä¾¦å¬å™¨<br>
è™½ç„¶è®¡ç®—å±æ€§åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æ›´åˆé€‚ï¼Œä½†æœ‰æ—¶ä¹Ÿéœ€è¦ä¸€ä¸ªè‡ªå®šä¹‰çš„ä¾¦å¬å™¨ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ Vue é€šè¿‡ watch é€‰é¡¹æä¾›äº†ä¸€ä¸ªæ›´é€šç”¨çš„æ–¹æ³•ï¼Œæ¥å“åº”æ•°æ®çš„å˜åŒ–ã€‚å½“éœ€è¦åœ¨æ•°æ®å˜åŒ–æ—¶æ‰§è¡Œå¼‚æ­¥æˆ–å¼€é”€è¾ƒå¤§çš„æ“ä½œæ—¶ï¼Œè¿™ä¸ªæ–¹å¼æ˜¯æœ€æœ‰ç”¨çš„ã€‚</p>
<p>ç»‘å®š HTML Class<br>
å¯¹è±¡è¯­æ³•<br>
æˆ‘ä»¬å¯ä»¥ä¼ ç»™ v-bind:class ä¸€ä¸ªå¯¹è±¡ï¼Œä»¥åŠ¨æ€åœ°åˆ‡æ¢ classï¼š</p>
<div v-bind:class="{ active: isActive }"></div>
ä¸Šé¢çš„è¯­æ³•è¡¨ç¤º active è¿™ä¸ª class å­˜åœ¨ä¸å¦å°†å–å†³äºæ•°æ® property isActive çš„ truthinessã€‚
<p>ä½ å¯ä»¥åœ¨å¯¹è±¡ä¸­ä¼ å…¥æ›´å¤šå­—æ®µæ¥åŠ¨æ€åˆ‡æ¢å¤šä¸ª classã€‚æ­¤å¤–ï¼Œv-bind:class æŒ‡ä»¤ä¹Ÿå¯ä»¥ä¸æ™®é€šçš„ class attribute å…±å­˜ã€‚å½“æœ‰å¦‚ä¸‹æ¨¡æ¿ï¼š</p>
<div
  class="static"
  v-bind:class="{ active: isActive, 'text-danger': hasError }"
></div>
å’Œå¦‚ä¸‹ dataï¼š
<p>data: {<br>
isActive: true,<br>
hasError: false<br>
}<br>
ç»“æœæ¸²æŸ“ä¸ºï¼š</p>
<pre><code>&lt;div class=&quot;static active&quot;&gt;&lt;/div&gt;

  &lt;style&gt;
   .styles{
      color: yellow;
  }
    &lt;/style&gt;
&lt;/head&gt;
    
  &lt;body&gt;
    &lt;div id=&quot;app&quot; &gt;
    &lt;span @click=&quot;handleClick&quot;
    :class=&quot;{styles: isActivated}&quot;&gt;XiaoMa&lt;/span&gt;
&lt;/div&gt;
     &lt;script&gt;
         var vm = new Vue({
             el:&quot;#app&quot;,
             data:{
                 isActivated : false
             },
             methods:{
              handleClick: function (){
                  this.isActivated=!this.isActivated;
              }
             }
         })
 &lt;/script&gt;
</code></pre>
<p>æ¡ä»¶æ¸²æŸ“<br>
v-if<br>
v-if æŒ‡ä»¤ç”¨äºæ¡ä»¶æ€§åœ°æ¸²æŸ“ä¸€å—å†…å®¹ã€‚è¿™å—å†…å®¹åªä¼šåœ¨æŒ‡ä»¤çš„è¡¨è¾¾å¼è¿”å› truthy å€¼çš„æ—¶å€™è¢«æ¸²æŸ“ã€‚</p>
<h4 v-if="awesome">Vue is awesome!</h4>
ä¹Ÿå¯ä»¥ç”¨ v-else æ·»åŠ ä¸€ä¸ªâ€œelse å—â€ï¼š
<h4 v-if="awesome">Vue is awesome!</h4>
<h4 v-else>Oh no ğŸ˜¢</h4>
åœ¨ < template> å…ƒç´ ä¸Šä½¿ç”¨ v-if æ¡ä»¶æ¸²æŸ“åˆ†ç»„
å› ä¸º v-if æ˜¯ä¸€ä¸ªæŒ‡ä»¤ï¼Œæ‰€ä»¥å¿…é¡»å°†å®ƒæ·»åŠ åˆ°ä¸€ä¸ªå…ƒç´ ä¸Šã€‚ä½†æ˜¯å¦‚æœæƒ³åˆ‡æ¢å¤šä¸ªå…ƒç´ å‘¢ï¼Ÿæ­¤æ—¶å¯ä»¥æŠŠä¸€ä¸ª < template> å…ƒç´ å½“åšä¸å¯è§çš„åŒ…è£¹å…ƒç´ ï¼Œå¹¶åœ¨ä¸Šé¢ä½¿ç”¨ v-ifã€‚æœ€ç»ˆçš„æ¸²æŸ“ç»“æœå°†ä¸åŒ…å« < t emplate> å…ƒç´ ã€‚
```
<template v-if="ok">
  <h1>Title</h1>
  <p>Paragraph 1</p>
  <p>Paragraph 2</p>
</template>
v-else-if 
<div v-if="type === 'A'">
  A
</div>
<div v-else-if="type === 'B'">
  B
</div>
<div v-else-if="type === 'C'">
  C
</div>
<div v-else>
  Not A/B/C
</div>
```
<h3 id="vue-ä¼šå°½å¯èƒ½é«˜æ•ˆåœ°æ¸²æŸ“å…ƒç´ é€šå¸¸ä¼šå¤ç”¨å·²æœ‰å…ƒç´ è€Œä¸æ˜¯ä»å¤´å¼€å§‹æ¸²æŸ“">Vue ä¼šå°½å¯èƒ½é«˜æ•ˆåœ°æ¸²æŸ“å…ƒç´ ï¼Œé€šå¸¸ä¼šå¤ç”¨å·²æœ‰å…ƒç´ è€Œä¸æ˜¯ä»å¤´å¼€å§‹æ¸²æŸ“ã€‚</h3>
<p>ä¼šä½¿å¾—æŸäº›å…ƒç´ ç›´æ¥å¤ç”¨ å‡ºç°ä¸€äº›é—®é¢˜</p>
<pre><code>&lt;template v-if=&quot;loginType === 'username'&quot;&gt;
  &lt;label&gt;Username&lt;/label&gt;
  &lt;input placeholder=&quot;Enter your username&quot;&gt;
&lt;/template&gt;
&lt;template v-else&gt;
  &lt;label&gt;Email&lt;/label&gt;
  &lt;input placeholder=&quot;Enter your email address&quot;&gt;
&lt;/template&gt;
</code></pre>
<p>inputé‡Œé¢çš„å†…å®¹åœ¨åˆ‡æ¢æ—¶ä¸ä¼šæ¸…é™¤ å› ä¸ºvueåœ¨æ¸²æŸ“æ—¶å¤ç”¨äº†å¦ä¸€ä¸ªinput<br>
è§£å†³æ–¹æ³•â€”â€” ç»‘å®škeyå€¼<br>
:key =&quot;id&quot;  vueæ ¹æ®keyæ¥åˆ¤æ–­æ˜¯ä¸æ˜¯ç›¸åŒçš„å…ƒç´ </p>
<p>v-show   ä¿ç•™æœ‰dom<br>
æ¡ä»¶å±•ç¤ºå…ƒç´ <br>
ä¸åŒçš„æ˜¯å¸¦æœ‰ v-show çš„å…ƒç´ å§‹ç»ˆä¼šè¢«æ¸²æŸ“å¹¶ä¿ç•™åœ¨ DOM ä¸­ã€‚v-show åªæ˜¯ç®€å•åœ°åˆ‡æ¢å…ƒç´ çš„ CSS property displayã€‚</p>
<h2 id="v-if-vs-v-show">v-if vs v-show</h2>
<p>v-if æ˜¯â€œçœŸæ­£â€çš„æ¡ä»¶æ¸²æŸ“ï¼Œå› ä¸ºå®ƒä¼šç¡®ä¿åœ¨åˆ‡æ¢è¿‡ç¨‹ä¸­æ¡ä»¶å—å†…çš„äº‹ä»¶ç›‘å¬å™¨å’Œå­ç»„ä»¶é€‚å½“åœ°è¢«é”€æ¯å’Œé‡å»ºã€‚<br>
v-if ä¹Ÿæ˜¯æƒ°æ€§çš„ï¼šå¦‚æœåœ¨åˆå§‹æ¸²æŸ“æ—¶æ¡ä»¶ä¸ºå‡ï¼Œåˆ™ä»€ä¹ˆä¹Ÿä¸åšâ€”â€”ç›´åˆ°æ¡ä»¶ç¬¬ä¸€æ¬¡å˜ä¸ºçœŸæ—¶ï¼Œæ‰ä¼šå¼€å§‹æ¸²æŸ“æ¡ä»¶å—ã€‚<br>
ç›¸æ¯”ä¹‹ä¸‹ï¼Œv-show å°±ç®€å•å¾—å¤šâ€”â€”ä¸ç®¡åˆå§‹æ¡ä»¶æ˜¯ä»€ä¹ˆï¼Œå…ƒç´ æ€»æ˜¯ä¼šè¢«æ¸²æŸ“ï¼Œå¹¶ä¸”åªæ˜¯ç®€å•åœ°åŸºäº CSS è¿›è¡Œåˆ‡æ¢ã€‚<br>
ä¸€èˆ¬æ¥è¯´ï¼Œv-if æœ‰æ›´é«˜çš„åˆ‡æ¢å¼€é”€ï¼Œè€Œ v-show æœ‰æ›´é«˜çš„åˆå§‹æ¸²æŸ“å¼€é”€ã€‚å› æ­¤ï¼Œå¦‚æœéœ€è¦éå¸¸é¢‘ç¹åœ°åˆ‡æ¢ï¼Œåˆ™ä½¿ç”¨ v-show è¾ƒå¥½ï¼›å¦‚æœåœ¨è¿è¡Œæ—¶æ¡ä»¶å¾ˆå°‘æ”¹å˜ï¼Œåˆ™ä½¿ç”¨ v-if è¾ƒå¥½ã€‚</p>
<p>åˆ—è¡¨æ¸²æŸ“<br>
åœ¨ v-for é‡Œä½¿ç”¨å¯¹è±¡<br>
ä½ ä¹Ÿå¯ä»¥ç”¨ v-for æ¥éå†ä¸€ä¸ªå¯¹è±¡çš„ propertyã€‚</p>
<pre><code>&lt;ul id=&quot;v-for-object&quot; class=&quot;demo&quot;&gt;
  &lt;li v-for=&quot;value in object&quot;&gt;
    {{ value }}
  &lt;/li&gt;
&lt;/ul&gt;
new Vue({
  el: '#v-for-object',
  data: {
    object: {
      title: 'How to do lists in Vue',
      author: 'Jane Doe',
      publishedAt: '2016-04-10'
    }
  }
})
</code></pre>
<p>ç»“æœï¼š</p>
<p>ä½ ä¹Ÿå¯ä»¥æä¾›ç¬¬äºŒä¸ªçš„å‚æ•°ä¸º property åç§° (ä¹Ÿå°±æ˜¯é”®å)ï¼š</p>
<div v-for="(value, name) in object">
  {{ name }}: {{ value }}
</div>
<p>è¿˜å¯ä»¥ç”¨ç¬¬ä¸‰ä¸ªå‚æ•°ä½œä¸ºç´¢å¼•ï¼š</p>
<div v-for="(value, name, index) in object">
  {{ index }}. {{ name }}: {{ value }}
</div>
ç»“æœå¦‚ä¸‹ï¼š
0.title: How to do lists in Vue,
1.author: Jane Doe,
2.publishedAt: 2016-04-10
<h2 id="éå†çš„ç‰¹æ€§">éå†çš„ç‰¹æ€§</h2>
<p>ç»´æŠ¤çŠ¶æ€<br>
å½“ Vue æ­£åœ¨æ›´æ–°ä½¿ç”¨ v-for æ¸²æŸ“çš„å…ƒç´ åˆ—è¡¨æ—¶ï¼Œå®ƒé»˜è®¤ä½¿ç”¨â€œå°±åœ°æ›´æ–°â€çš„ç­–ç•¥ã€‚å¦‚æœæ•°æ®é¡¹çš„é¡ºåºè¢«æ”¹å˜ï¼ŒVue å°†ä¸ä¼šç§»åŠ¨ DOM å…ƒç´ æ¥åŒ¹é…æ•°æ®é¡¹çš„é¡ºåºï¼Œè€Œæ˜¯å°±åœ°æ›´æ–°æ¯ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”ç¡®ä¿å®ƒä»¬åœ¨æ¯ä¸ªç´¢å¼•ä½ç½®æ­£ç¡®æ¸²æŸ“ã€‚è¿™ä¸ªç±»ä¼¼ Vue 1.x çš„ track-by=&quot;$index&quot;ã€‚<br>
è¿™ä¸ªé»˜è®¤çš„æ¨¡å¼æ˜¯é«˜æ•ˆçš„ï¼Œä½†æ˜¯åªé€‚ç”¨äºä¸ä¾èµ–å­ç»„ä»¶çŠ¶æ€æˆ–ä¸´æ—¶ DOM çŠ¶æ€ (ä¾‹å¦‚ï¼šè¡¨å•è¾“å…¥å€¼) çš„åˆ—è¡¨æ¸²æŸ“è¾“å‡ºã€‚<br>
ä¸ºäº†ç»™ Vue ä¸€ä¸ªæç¤ºï¼Œä»¥ä¾¿å®ƒèƒ½è·Ÿè¸ªæ¯ä¸ªèŠ‚ç‚¹çš„èº«ä»½ï¼Œä»è€Œé‡ç”¨å’Œé‡æ–°æ’åºç°æœ‰å…ƒç´ ï¼Œä½ éœ€è¦ä¸ºæ¯é¡¹æä¾›ä¸€ä¸ªå”¯ä¸€ key attributeï¼š</p>
<div v-for="item in items" v-bind:key="item.id">
  <!-- å†…å®¹ -->
</div>
å»ºè®®å°½å¯èƒ½åœ¨ä½¿ç”¨ v-for æ—¶æä¾› key attributeï¼Œé™¤ééå†è¾“å‡ºçš„ DOM å†…å®¹éå¸¸ç®€å•ï¼Œæˆ–è€…æ˜¯åˆ»æ„ä¾èµ–é»˜è®¤è¡Œä¸ºä»¥è·å–æ€§èƒ½ä¸Šçš„æå‡ã€‚
<p>å˜æ›´æ–¹æ³•<br>
Vue å°†è¢«ä¾¦å¬çš„æ•°ç»„çš„å˜æ›´æ–¹æ³•è¿›è¡Œäº†åŒ…è£¹ï¼Œæ‰€ä»¥å®ƒä»¬ä¹Ÿå°†ä¼šè§¦å‘è§†å›¾æ›´æ–°ã€‚è¿™äº›è¢«åŒ…è£¹è¿‡çš„æ–¹æ³•åŒ…æ‹¬ï¼š<br>
push()<br>
pop()<br>
shift()<br>
unshift()<br>
splice()<br>
sort()<br>
reverse()<br>
tipï¼šç”¨æ•°ç»„ä¸‹æ ‡å¯ä»¥æ¥æ”¹å˜æ•°æ® ä½†æ˜¯ä¸ä¼šè§¦å‘è§†å›¾æ›´æ–°</p>
<h2 id="ä½¿ç”¨refè·å–dom">ä½¿ç”¨refè·å–dom</h2>
<pre><code>&lt;body&gt;
    &lt;div id='app'&gt;
       &lt;div ref='hello' @click=&quot;handleClick&quot;&gt;
           click me
        æ­¤divç»‘å®šäº†ä¸€ä¸ªref hello
        åœ¨å‡½æ•°ä¸­ä½¿ç”¨this.$refs vueå®ä¾‹ä¸­æ‰€æœ‰çš„å¼•ç”¨
        this.$refs.helloå¯ä»¥å–åˆ°è¿™ä¸ªdomèŠ‚ç‚¹
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;script&gt;
  new Vue({
      el:'#app',
      methods: {
          handleClick : function(){
              alert(this.$refs.hello.innerHTML);
          }
      }

});
    &lt;/script&gt;
  &lt;/body&gt;

</code></pre>
<h2 id="ç»„ä»¶çš„ä½¿ç”¨">ç»„ä»¶çš„ä½¿ç”¨</h2>
<p>Vue.component('ç»„ä»¶åç§°', {ç»„ä»¶å†…å®¹});<br>
åœ¨åˆ›å»ºå ç»„ä»¶ä¸ºå¯å¤ç”¨çš„vueå®ä¾‹<br>
ç»„ä»¶ä½œä¸ºè‡ªå®šä¹‰å…ƒç´ æ¥ä½¿ç”¨ï¼š<br>
&lt;ç»„ä»¶å&gt;&lt;/ç»„ä»¶å&gt;</p>
<p>ç»„ä»¶çš„æ³¨å†Œ<br>
Vue.componet å…¨å±€æ³¨å†Œ<br>
å…¨å±€æ³¨å†Œçš„ç»„ä»¶å¯ä»¥ç”¨åœ¨å…¶è¢«æ³¨å†Œä¹‹åçš„ä»»ä½• (é€šè¿‡ new Vue) æ–°åˆ›å»ºçš„ Vue æ ¹å®ä¾‹ï¼Œä¹ŸåŒ…æ‹¬å…¶ç»„ä»¶æ ‘ä¸­çš„æ‰€æœ‰å­ç»„ä»¶çš„æ¨¡æ¿ä¸­ã€‚<br>
å±€éƒ¨æ³¨å†Œ<br>
var ComponentA = { /* ... <em>/ }<br>
var ComponentB = { /</em> ... <em>/ }<br>
var ComponentC = { /</em> ... */ }<br>
ç„¶ååœ¨ components é€‰é¡¹ä¸­å®šä¹‰ä½ æƒ³è¦ä½¿ç”¨çš„ç»„ä»¶ï¼š</p>
<pre><code>new Vue({
  el: '#app',
  components: {
    'component-a': ComponentA,
    'component-b': ComponentB
  }
})
</code></pre>
<p>å¯¹äº components å¯¹è±¡ä¸­çš„æ¯ä¸ª property æ¥è¯´ï¼Œå…¶ property åå°±æ˜¯è‡ªå®šä¹‰å…ƒç´ çš„åå­—ï¼Œå…¶ property å€¼å°±æ˜¯è¿™ä¸ªç»„ä»¶çš„é€‰é¡¹å¯¹è±¡ã€‚</p>
<h3 id="tipå±€éƒ¨ç»„ä»¶çš„ä½¿ç”¨éœ€è¦åƒä¸Šé¢é‚£æ ·å£°æ˜-å³å±€éƒ¨ç»„ä»¶ä¸­ä½¿ç”¨å¦ä¸€ä¸ªéœ€è¦å£°æ˜">tipï¼šå±€éƒ¨ç»„ä»¶çš„ä½¿ç”¨éœ€è¦åƒä¸Šé¢é‚£æ ·å£°æ˜  å³å±€éƒ¨ç»„ä»¶ä¸­ä½¿ç”¨å¦ä¸€ä¸ªéœ€è¦å£°æ˜</h3>
<p>var ComponentA = { /* ... */ }<br>
var ComponentB = {<br>
components: {<br>
'component-a': ComponentA<br>
},<br>
// ...<br>
}</p>
<h2 id="prop">Prop</h2>
<p>å­ç»„ä»¶è®¾ç½®propså±æ€§æ¥æ¥æ”¶çˆ¶ç»„ä»¶çš„æ•°æ®<br>
å•å‘æ•°æ®æµï¼š å­ç»„ä»¶ä¸èƒ½æ”¹å˜çˆ¶ç»„ä»¶ä¼ æ¥çš„å€¼ çˆ¶ç»„ä»¶æ›´æ–°æ•°æ®ä¼ ç»™å­ç»„ä»¶çš„æ•°æ®ä¼šè¿›è¡Œæ›´æ–°<br>
å¦‚æœéœ€è¦æ›´æ”¹å¹¶ä¼ ç»™çˆ¶ç»„ä»¶å¯ä»¥ï¼š<br>
åœ¨å­ç»„ä»¶dataä¸­copyæ•°æ® å¹¶ä½¿ç”¨dataä¸­çš„æ•°æ®è¿›è¡Œä¼ å€¼</p>
<p>1 å­å±€éƒ¨ç»„ä»¶åˆ›å»º  var a={}<br>
2 çˆ¶ç»„ä»¶åœ¨ç»„ä»¶ä¸­å£°æ˜ components:{ a : a}<br>
3 å­ç»„ä»¶åœ¨propså±æ€§ä¸­ å£°æ˜å¥½å­ç»„ä»¶éœ€è¦æ¥æ”¶åˆ°çš„æ•°æ® props:['data']<br>
4 åœ¨å­ç»„ä»¶è°ƒç”¨æ—¶ åˆ©ç”¨propsè¿›è¡Œä¼ å€¼  <a :data= "éœ€è¦ä¼ é€’çš„æ•°æ®"></a><br>
5  å­ç»„ä»¶éœ€è¦å‘çˆ¶ç»„ä»¶ä¼ å€¼æ—¶ å¯ä»¥è°ƒç”¨this.$emit(&quot;äº‹ä»¶å&quot;,å‚æ•°1) æ¥ä¼ å€¼ è§¦å‘è‡ªå®šä¹‰äº‹ä»¶<br>
6  å­ç»„ä»¶ä¸Šæå‰ç›‘å¬å¥½äº†è¿™ä¸ªäº‹ä»¶ åœ¨å­ç»„ä»¶è§¦å‘è¿™ä¸ªäº‹ä»¶å¼€å§‹è°ƒç”¨å¤„ç†å‡½æ•° çˆ¶ç»„ä»¶é‡Œçš„æ–¹æ³•è¿›è¡Œå¤„ç†<br>
7 å¤„ç†å®Œæ¯• çˆ¶å­ç»„ä»¶ç›¸äº’ä¼ å€¼æˆåŠŸ</p>
<pre><code>&lt;html&gt;
  &lt;head&gt;
    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;
    &lt;title&gt;Model&lt;/title&gt;
    &lt;!-- å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«äº†æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š --&gt;
    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;&gt;&lt;/script&gt;
  &lt;/head&gt;
 
  &lt;body&gt;
    &lt;div id=&quot;app&quot;&gt;
        &lt;p&gt;çˆ¶å­ç»„ä»¶ä¼ å€¼ å­ç»„ä»¶è®¾ç½®propså±æ€§æ¥æ”¶æ•°æ®&lt;/p&gt;
        &lt;counter :count=&quot;data1&quot; @change=&quot;handleChange&quot;&gt;&lt;/counter&gt;
        &lt;counter :count=&quot;data2&quot; @change=&quot;handleChange&quot;&gt;&lt;/counter&gt;
        &lt;p&gt;ç°åœ¨ç»™çˆ¶ç»„ä»¶æ·»åŠ ä¸€ä¸ªæ•°æ® å€¼ä¸ºä¸¤ä¸ªcounterçš„æ•°å­—å’Œ æ¶‰åŠå­ç»„ä»¶ç»™çˆ¶ç»„ä»¶ä¼ å€¼&lt;/p&gt;
        &lt;p&gt;æ¶‰åŠä¸‰æ­¥éª¤ å­ç»„ä»¶è¢«ç‚¹å‡»è§¦å‘è‡ªå®šä¹‰çš„changeäº‹ä»¶ ç„¶åçˆ¶ç»„ä»¶è®¾ç½®äº†ç›‘å¬å±æ€§ç›‘å¬äº†è¿™ä¸ªchangeäº‹ä»¶ æœ€åè¿›è¡Œå¤„ç†äº‹ä»¶&lt;/p&gt;
        {{totalNum}}
    &lt;/div&gt;
    &lt;script&gt;
        var counter = {
            props:['count'],
            template:'&lt;div @click=&quot;handleClick&quot;&gt;{{number}}&lt;/div&gt;',
            methods:{
                handleClick:function(){
                    this.number++;
                    this.$emit('change',1);
                }
            },
            data:function(){
                return{
                    number: this.count
                }
            }
        }
       new Vue({
           el:'#app',
           components:{
               counter:counter
           },
            data: function(){
                return{
                    totalNum:0,
                    data1:0,
                    data2:0
                }
            },
            methods:{
                handleChange:function(value){
                  // alert(value);
                   this.totalNum+= value;
                }
            }
       }) 
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h3 id="tip-å¦‚æœè¦å­ç»„ä»¶è¦ä¼ ç»™çˆ¶ç»„ä»¶å¤šä¸ªå€¼">tip ï¼š å¦‚æœè¦å­ç»„ä»¶è¦ä¼ ç»™çˆ¶ç»„ä»¶å¤šä¸ªå€¼</h3>
<p>å­ç»„ä»¶ï¼š this.$emit( &quot;äº‹ä»¶å&quot;, data1,data2)<br>
çˆ¶ç»„ä»¶ï¼š @äº‹ä»¶å = &quot;å¤„ç†å‡½æ•°(arguments)&quot;  å‚æ•°å¯¹è±¡<br>
æ­¤æ—¶ data1ä¸ºarguments[0]  data2ä¸ºarguments[1] ...</p>
<h2 id="ç»„ä»¶å">ç»„ä»¶å</h2>
<p>éµå¾ª W3C è§„èŒƒä¸­çš„è‡ªå®šä¹‰ç»„ä»¶å (å­—æ¯å…¨å°å†™ä¸”å¿…é¡»åŒ…å«ä¸€ä¸ªè¿å­—ç¬¦)ã€‚<br>
å®šä¹‰ç»„ä»¶åçš„æ–¹å¼æœ‰ä¸¤ç§ï¼š</p>
<h3 id="ä½¿ç”¨-kebab-case">ä½¿ç”¨ kebab-case</h3>
<p>Vue.component('my-component-name', { /* ... */ })<br>
å½“ä½¿ç”¨ kebab-case (çŸ­æ¨ªçº¿åˆ†éš”å‘½å) å®šä¹‰ä¸€ä¸ªç»„ä»¶æ—¶ï¼Œä½ ä¹Ÿå¿…é¡»åœ¨å¼•ç”¨è¿™ä¸ªè‡ªå®šä¹‰å…ƒç´ æ—¶ä½¿ç”¨ kebab-caseï¼Œä¾‹å¦‚ <my-component-name>ã€‚</p>
<h3 id="ä½¿ç”¨-pascalcase">ä½¿ç”¨ PascalCase</h3>
<p>Vue.component('MyComponentName', { /* ... */ })<br>
å½“ä½¿ç”¨ PascalCase (é¦–å­—æ¯å¤§å†™å‘½å) å®šä¹‰ä¸€ä¸ªç»„ä»¶æ—¶ï¼Œä½ åœ¨å¼•ç”¨è¿™ä¸ªè‡ªå®šä¹‰å…ƒç´ æ—¶ä¸¤ç§å‘½åæ³•éƒ½å¯ä»¥ä½¿ç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ <my-component-name> å’Œ <MyComponentName> éƒ½æ˜¯å¯æ¥å—çš„ã€‚æ³¨æ„ï¼Œå°½ç®¡å¦‚æ­¤ï¼Œç›´æ¥åœ¨ DOM (å³éå­—ç¬¦ä¸²çš„æ¨¡æ¿) ä¸­ä½¿ç”¨æ—¶åªæœ‰ kebab-case æ˜¯æœ‰æ•ˆçš„ã€‚<br>
tipï¼šæœ€å¥½é€‰æ‹©ä¸€ç§å…¨éƒ¨ä½¿ç”¨</p>
<p>ç»„ä»¶å‚æ•°æ ¡éªŒ</p>
<pre><code>Vue.component('my-component', {
  props: {
    // åŸºç¡€çš„ç±»å‹æ£€æŸ¥ (`null` å’Œ `undefined` ä¼šé€šè¿‡ä»»ä½•ç±»å‹éªŒè¯)
    propA: Number,
    // å¤šä¸ªå¯èƒ½çš„ç±»å‹
    propB: [String, Number],
    // å¿…å¡«çš„å­—ç¬¦ä¸²
    propC: {
      type: String,
      required: true
    },
    // å¸¦æœ‰é»˜è®¤å€¼çš„æ•°å­—
    propD: {
      type: Number,
      default: 100
    },
    // å¸¦æœ‰é»˜è®¤å€¼çš„å¯¹è±¡
    propE: {
      type: Object,
      // å¯¹è±¡æˆ–æ•°ç»„é»˜è®¤å€¼å¿…é¡»ä»ä¸€ä¸ªå·¥å‚å‡½æ•°è·å–
      default: function () {
        return { message: 'hello' }
      }
    },
    // è‡ªå®šä¹‰éªŒè¯å‡½æ•°  ï¼ˆè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼‰
    propF: {
      validator: function (value) {
        // è¿™ä¸ªå€¼å¿…é¡»åŒ¹é…ä¸‹åˆ—å­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ª
        return ['success', 'warning', 'danger'].indexOf(value) !== -1
      }
    }
  }
})
</code></pre>
<h2 id="propsç‰¹æ€§ä¸épropsç‰¹æ€§">propsç‰¹æ€§ä¸épropsç‰¹æ€§</h2>
<ul>
<li>propsç‰¹æ€§ï¼š<br>
å­ç»„ä»¶å£°æ˜äº†ä¼ é€’å‚æ•°çš„æ¥æ”¶<br>
ä¼ é€’çš„å‚æ•°ä¸ä¼šåœ¨domæ ‡ç­¾ä¸­æ˜¾ç¤º<br>
å¯ä»¥é€šè¿‡æ’å€¼è¡¨è¾¾å¼æˆ–è€…é€šè¿‡this.contentå»å–å¾—è¯¥å±æ€§ä¸­çš„å†…å®¹ã€‚</li>
<li>épropsç‰¹æ€§ï¼š<br>
å­ç»„ä»¶ä¸å£°æ˜ä»çˆ¶ç»„ä»¶æ¥æ”¶è€Œæ¥çš„å‚æ•°<br>
æ˜¾ç¤ºåœ¨å­ç»„ä»¶æœ€å¤–å±‚DOMæ ‡ç­¾çš„HTMLå±æ€§é‡Œé¢</li>
</ul>
<p>ç»„ä»¶ç»‘å®šåŸç”Ÿäº‹ä»¶<br>
&lt;child @handle=&quot;handleChildClick&quot;&gt;</child>  åœ¨ç»„ä»¶ä¸Šç»‘å®šäº‹ä»¶ä¸ºè‡ªå®šä¹‰äº‹ä»¶<br>
template: '&lt;div @click=&quot;handleClick&quot;&gt;Click me</div>'  åœ¨æ¨¡æ¿é‡Œç›´æ¥ä¼šè¢«æ¸²æŸ“ æ‰€ä»¥ç»‘å®šåŸç”Ÿäº‹ä»¶  ï¼ˆä¸€èˆ¬åœ¨è¿™ä¸ªåŸç”Ÿäº‹ä»¶é‡Œå¯ä»¥this.$emit('handle') è§¦å‘å¦ä¸€ä¸ªäº‹ä»¶)<br>
ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;body&gt;
    &lt;div id=&quot;app&quot; &gt;
        &lt;child @handle=&quot;handleChildClick&quot;&gt;&lt;/child&gt;
  &lt;/div&gt;
     &lt;script&gt;
         var child = {
             template:  '&lt;div @click=&quot;handleClick&quot;&gt;Click me&lt;/div&gt;',
             methods:{
                 handleClick :function(){
                     alert('åŸç”Ÿäº‹ä»¶è§¦å‘');
                     this.$emit('handle');
                 }
             }
         }
         new Vue({
             el:'#app',
            components:{
                child : child,
            },
            methods:{
                handleChildClick :function(){
                    alert('è‡ªå®šä¹‰äº‹ä»¶è§¦å‘');
                }
            }
         })
      &lt;/script&gt;
  &lt;/body&gt;
</code></pre>
<p>åŸç”Ÿäº‹ä»¶è§¦å‘ -ã€‹ this.$emit -ã€‹ ç›‘å¬å­ç»„ä»¶çš„è‡ªå®šä¹‰äº‹ä»¶æ¥æ”¶åˆ° -ã€‹ è‡ªå®šä¹‰äº‹ä»¶è§¦å‘</p>
<h2 id="ç›´æ¥ç›‘å¬å­ç»„ä»¶çš„åŸç”Ÿäº‹ä»¶">ç›´æ¥ç›‘å¬å­ç»„ä»¶çš„åŸç”Ÿäº‹ä»¶</h2>
<p>ä½¿ç”¨ä¿®é¥°ç¬¦ .native<br>
ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;body&gt;
    &lt;div id=&quot;app&quot; &gt;
        &lt;child @click.native=&quot;handleChildClick&quot;&gt;&lt;/child&gt;
    &lt;/div&gt;
     &lt;script&gt;
         var child = {
             template:  '&lt;div&gt;Click me&lt;/div&gt;',
         }
         new Vue({
             el:'#app',
            components:{
                child : child,
            },
            methods:{
                handleChildClick :function(){
                    alert('åˆ©ç”¨ä¿®é¥°ç¬¦ç›´æ¥è§¦å‘åŸç”Ÿäº‹ä»¶');
                }
            }
         })
      &lt;/script&gt;
  &lt;/body&gt;
</code></pre>
<h2 id="éçˆ¶å­ç»„ä»¶ä¹‹é—´ä¼ å€¼">éçˆ¶å­ç»„ä»¶ä¹‹é—´ä¼ å€¼</h2>
<p>(Bus/æ€»çº¿/å‘å¸ƒè€…è®¢é˜…æ¨¡å¼/è§‚å¯Ÿè€…æ¨¡å¼ï¼‰<br>
åœ¨vueæœ€é¡¶éƒ¨</p>
<ul>
<li>Vue.prototype.bus = new Vue();<br>
åœ¨Vueçš„prototypeæŒ‚è½½äº†ä¸€ä¸ªbuså±æ€§ è¿™ä¸ªå±æ€§æ˜¯æŒ‡å‘vueçš„å®ä¾‹ è°ƒç”¨ Vue æˆ–è€…new Vueæ—¶ï¼Œæ¯ä¸ªç»„ä»¶éƒ½ä¼šæœ‰ä¸€ä¸ªbuså±æ€§ï¼Œå› ä¸ºä»¥åä¸ç®¡æ˜¯ Vue çš„å±æ€§è¿˜æ˜¯ Vue çš„å®ä¾‹ï¼Œéƒ½æ˜¯é€šè¿‡ Vue æ¥åˆ›å»ºçš„ï¼Œè€Œæˆ‘åœ¨ Vue çš„prototypeä¸ŠæŒ‚è½½äº†ä¸€ä¸ªbusçš„å±æ€§ã€‚</li>
<li>this.bus.$emit('è§¦å‘äº‹ä»¶', data)  ä¼ é€’çš„å®ä¾‹</li>
<li>this.bus.$on('è§¦å‘äº‹ä»¶', msg =&gt; {console.log('å›è°ƒå‡½æ•°æ‰§è¡Œ msgä¸ºä¼ é€’çš„æ•°æ®'})  æ¥æ”¶çš„å®ä¾‹</li>
</ul>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;body&gt;
    &lt;div id=&quot;app&quot;&gt;
        &lt;sendchild :msg=&quot;1&quot;&gt;&lt;/sendchild&gt;
        &lt;acceptchild :msg=&quot;2&quot;&gt;&lt;/acceptchild&gt;
    &lt;/div&gt;
    &lt;script&gt;
       Vue.prototype.bus = new Vue();
        var sendchild= {
            template: '&lt;div @click=&quot;handleClick&quot;&gt;{{content}}&lt;/div&gt;',
            data: function(){
                return {
                    content: this.msg
                }
            },
            methods:{
                handleClick:function (){
                    alert('sendå­©å­å¼€å§‹ä¼ å€¼,ç”¨buså±æ€§ emit transportäº‹ä»¶ æ•°æ®ä¸ºcontent');
                    this.bus.$emit('transport',this.content);
                },
            },
           mounted:function(){
                console.log('sendå­©å­å®ä¾‹åˆ›å»ºï¼Œç›‘å¬transportäº‹ä»¶');
                this.bus.$on('transport',msg =&gt;console.log('sendå­©å­æ¥æ”¶åˆ°msgæ•°æ®,æ•°æ®ä¸º'+msg));
           },
            props:{
                msg: Number
            },
        }
        var acceptchild= {
            data: function(){
                return {
                    content: this.msg
                }
            },
            methods:{
                handleClick:function (){
                    alert('acceptå­©å­å¼€å§‹ä¼ å€¼,ç”¨buså±æ€§emit transportäº‹ä»¶ æ•°æ®ä¸ºcontent');
                    this.bus.$emit('transport',this.content);
                },
            },
            mounted:function(){
                console.log('acceptå­©å­å®ä¾‹åˆ›å»ºï¼Œç›‘å¬transportäº‹ä»¶');
                this.bus.$on('transport',msg =&gt;console.log('acceptå­©å­æ¥æ”¶åˆ°msgæ•°æ®,æ•°æ®ä¸º'+msg));
           },
            props:{
                msg: Number
            },
            template: '&lt;div @click=&quot;handleClick&quot;&gt;{{content}}&lt;/div&gt;'
        }
        new Vue({
            el:'#app',
            components:{
                sendchild : sendchild,
                acceptchild: acceptchild
            }
        })
    &lt;/script&gt;
  &lt;/body&gt;
</code></pre>
<p>ä½¿ç”¨æ’æ§½ slot  â€”â€”Vue å®ç°äº†ä¸€å¥—å†…å®¹åˆ†å‘çš„ APIï¼Œå°†<slot>å…ƒç´ ä½œä¸ºæ‰¿è½½åˆ†å‘å†…å®¹çš„å‡ºå£<br>
å­ç»„ä»¶è®¾ç½®slotå ä½  çˆ¶ç»„ä»¶ä¸ºè¿™ä¸ªslotå¡«å……å†…å®¹</p>
<pre><code>&lt;div id='app'&gt;
        &lt;!-- childç»„ä»¶é‡Œé¢å†™çš„å†…å®¹ä¼šé»˜è®¤æ’å€¼åˆ°æ¨¡æ¿é‡Œçš„slotæ ‡ç­¾é‡Œ --&gt;
        &lt;child&gt;
            &lt;h1&gt;DELL&lt;/h1&gt;
        &lt;/child&gt;
    &lt;/div&gt;
    &lt;script&gt;
     Vue.component('child',{
         template: `
                &lt;div&gt;
                    &lt;p&gt;firstLine&lt;/p&gt;
                    &lt;slot&gt;slotæ ‡ç­¾é‡Œé¢ä¸ºé»˜è®¤å†…å®¹&lt;/slot&gt;
                &lt;/div&gt;
                `
     })
     new Vue({
         el: '#app'
     })
    &lt;/script&gt;
</code></pre>
<p>æ˜¾ç¤º<br>
firstLine<br>
DELL<br>
tipï¼šå¦‚æœchildç»„ä»¶æ— å†…å®¹ å³<child></child><br>
æ˜¾ç¤º<br>
firstLine<br>
slotæ ‡ç­¾é‡Œé¢ä¸ºé»˜è®¤å†…å®¹</p>
<p>å¦‚æœæƒ³æœ‰å¤šä¸ªæ’æ§½ ä½¿ç”¨å…·åæ’æ§½</p>
<pre><code>  &lt;div id='app'&gt;
        &lt;!-- childç»„ä»¶é‡Œé¢å†™çš„å†…å®¹ä¼šé»˜è®¤æ’å€¼åˆ°æ¨¡æ¿é‡Œçš„slotæ ‡ç­¾é‡Œ --&gt;
        &lt;child&gt;
            &lt;header slot=&quot;header&quot;&gt;Header&lt;/header&gt;
            &lt;footer slot=&quot;footer&quot;&gt;Footer&lt;/footer&gt;
        &lt;/child&gt;
    &lt;/div&gt;
    &lt;script&gt;
     Vue.component('child',{
         template: `
                &lt;div&gt;
                     &lt;slot name='header'&gt;default Header&lt;/slot&gt;
                    &lt;div class=&quot;main&quot;&gt;Main&lt;/div&gt;
                    &lt;slot name='footer'&gt;default Footer&lt;/slot&gt;
                &lt;/div&gt;
                `
     })
     new Vue({
         el: '#app'
     })
    &lt;/script&gt;
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Js æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆæ‰§è¡Œç¯å¢ƒï¼‰]]></title>
        <id>https://huyifu.github.io/post/js-zhi-xing-shang-xia-wen-zhi-xing-huan-jing/</id>
        <link href="https://huyifu.github.io/post/js-zhi-xing-shang-xia-wen-zhi-xing-huan-jing/">
        </link>
        <updated>2021-03-30T16:13:19.000Z</updated>
        <content type="html"><![CDATA[<p>å¼•è¨€ï¼šåœ¨å…œå…œè½¬è½¬ä¸€åœˆåæ€»ç®—æ˜¯å¤§æ¦‚ç†æ¸…äº† æ‰§è¡Œç¯å¢ƒ this è¯æ³•ç¯å¢ƒç­‰ç­‰æ¦‚å¿µ å¦‚æœä¹‹åå­¦ä¹ åˆæœ‰æ–°çš„çœ‹æ³•å’Œè§£é‡Šç»§ç»­ä¿®æ”¹<br>
è¡Œæ–‡æ€è·¯ï¼š æ‰§è¡Œä¸Šä¸‹æ–‡ çš„ç±»å‹ å­˜å‚¨æ–¹å¼<br>
æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç”Ÿå‘½å‘¨æœŸ å’Œç»“æ„<br>
ç»“æ„ä¸€ es3<br>
å˜é‡å¯¹è±¡(variable object)ï¼ŒthisæŒ‡é’ˆ(this value)ï¼Œä½œç”¨åŸŸé“¾(scope chain) ä¸‰éƒ¨åˆ†åˆ†åˆ«è®²è§£åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡åœ¨ç”Ÿå‘½å‘¨æœŸé‡Œçš„å˜åŒ–<br>
ç»“æ„äºŒ es6<br>
è¯æ³•ç¯å¢ƒç»„ä»¶å’Œå˜é‡ç¯å¢ƒç»„ä»¶   ä¸¤éƒ¨åˆ†åˆ†åˆ«è®²è§£<br>
åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡åœ¨ç”Ÿå‘½å‘¨æœŸé‡Œçš„å˜åŒ–<br>
æ€»ç»“ï¼š</p>
<h1 id="jsæ˜¯è§£é‡Šæ‰§è¡Œçš„è¯­è¨€">JSæ˜¯è§£é‡Šæ‰§è¡Œçš„è¯­è¨€</h1>
<p>å› æ­¤ä»£ç ä¼šé€šè¿‡å…ˆè§£æåæ‰§è¡Œçš„æ–¹å¼è¿›è¡Œè¿è¡Œï¼Œè€Œè¿™ä¸ªè¿‡ç¨‹JSå¼•æ“ä¼šæ„é€ å‡ºä¸€ä¸ªæŠ½è±¡çš„ç¯å¢ƒ è¿™ä¸ªç¯å¢ƒå°±æ˜¯æ‰§è¡Œç¯å¢ƒ(Execution Contextï¼Œä¹Ÿç§°ä¸º&quot;æ‰§è¡Œä¸Šä¸‹æ–‡&quot;)</p>
<h2 id="æ‰§è¡Œä¸Šä¸‹æ–‡æœ‰ä¸‰ç§ç±»å‹">æ‰§è¡Œä¸Šä¸‹æ–‡æœ‰ä¸‰ç§ç±»å‹</h2>
<ol>
<li>å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼š è¿™æ˜¯é»˜è®¤çš„ã€æœ€åŸºç¡€çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ä¸åœ¨ä»»ä½•å‡½æ•°ä¸­çš„ä»£ç éƒ½ä½äºå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ã€‚å®ƒåšäº†ä¸¤ä»¶äº‹ï¼š1. åˆ›å»ºä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼Œåœ¨æµè§ˆå™¨ä¸­è¿™ä¸ªå…¨å±€å¯¹è±¡å°±æ˜¯ window å¯¹è±¡ã€‚2. å°† this æŒ‡é’ˆæŒ‡å‘è¿™ä¸ªå…¨å±€å¯¹è±¡ã€‚ä¸€ä¸ªç¨‹åºä¸­åªèƒ½å­˜åœ¨ä¸€ä¸ªå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</li>
<li>å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼š æ¯æ¬¡è°ƒç”¨å‡½æ•°æ—¶ï¼Œéƒ½ä¼šä¸ºè¯¥å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚æ¯ä¸ªå‡½æ•°éƒ½æ‹¥æœ‰è‡ªå·±çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œä½†æ˜¯åªæœ‰åœ¨å‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™æ‰ä¼šè¢«åˆ›å»ºã€‚ä¸€ä¸ªç¨‹åºä¸­å¯ä»¥å­˜åœ¨ä»»æ„æ•°é‡çš„å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚æ¯å½“ä¸€ä¸ªæ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡è¢«åˆ›å»ºï¼Œå®ƒéƒ½ä¼šæŒ‰ç…§ç‰¹å®šçš„é¡ºåºæ‰§è¡Œä¸€ç³»åˆ—æ­¥éª¤ï¼Œå…·ä½“è¿‡ç¨‹å°†åœ¨æœ¬æ–‡åé¢è®¨è®ºã€‚</li>
<li>Eval å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼š è¿è¡Œåœ¨ eval å‡½æ•°ä¸­çš„ä»£ç ä¹Ÿè·å¾—äº†è‡ªå·±çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œä½†ç”±äº Javascript å¼€å‘äººå‘˜ä¸å¸¸ç”¨ eval å‡½æ•°ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œä¸å†è®¨è®ºã€‚</li>
</ol>
<h2 id="æ‰§è¡Œä¸Šä¸‹æ–‡çš„å­˜å‚¨æ–¹å¼">æ‰§è¡Œä¸Šä¸‹æ–‡çš„å­˜å‚¨æ–¹å¼</h2>
<p>æ¯ä¸€ä¸ªä¸Šä¸‹æ–‡åœ¨æœ¬è´¨ä¸Šéƒ½æ˜¯ä¸€ç§ä½œç”¨åŸŸå±‚çº§ã€‚æ¯ä¸ªä»£ç æ®µå¼€å§‹æ‰§è¡Œçš„æ—¶å€™éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ä¸Šä¸‹æ–‡æ¥è¿è¡Œå®ƒï¼Œå¹¶ä¸”åœ¨ä»£ç é€€å‡ºçš„æ—¶å€™é”€æ¯æ‰ã€‚è€Œè¿™ç§æ–¹å¼å…¶å®æ˜¯ä¸€ç§å †æ ˆçš„æ–¹å¼<br>
åœ¨JSä¸­ï¼Œæ˜¯ä»¥æ ˆ(åè¿›å…ˆå‡º)è¿™ç§æ•°æ®ç»“æ„å­˜å‚¨æ‰§è¡Œä¸Šä¸‹æ–‡çš„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„ æ‰§è¡Œæ ˆã€‚<br>
æ‰§è¡ŒJSä»£ç æ—¶ï¼ŒJSå¼•æ“é¦–å…ˆä¼šåˆ›å»ºä¸€ä¸ªå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå¹¶å‹å…¥æ ˆåº•ï¼›ä¹‹åæ¯å½“ è°ƒç”¨ ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œéƒ½ä¼šä¸ºè¯¥å‡½æ•°åˆ›å»ºä¸€ä¸ªå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå¹¶å‹å…¥æ ˆã€‚<br>
ä¹‹åå¼•æ“ä¼šæ‰§è¡Œæ ˆé¡¶çš„å‡½æ•°ï¼Œå‡½æ•°æ‰§è¡Œç»“æŸåï¼Œè¯¥å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä»æ ˆä¸­å¼¹å‡ºï¼›å†æ‰§è¡Œä¸‹ä¸€ä¸ªå‡½æ•°ï¼Œç›´åˆ°å…¨éƒ¨å‡ºæ ˆã€‚</p>
<pre><code>function A() {
  console.log('this is A')
  function B() {
    console.log('this is B')
  }
  B()
}
A()
</code></pre>
<p>æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ<br>
è°ƒç”¨æ ˆä¾æ¬¡ä¸ºï¼š<br>
[ å…¨å±€ç¯å¢ƒ ]<br>
[ å…¨å±€ç¯å¢ƒï¼ŒA æ‰§è¡Œç¯å¢ƒ ] A()ï¼Œè°ƒç”¨ A å‡½æ•°ï¼ŒA æ‰§è¡Œç¯å¢ƒå…¥æ ˆ<br>
[ å…¨å±€ç¯å¢ƒï¼ŒA æ‰§è¡Œç¯å¢ƒï¼ŒB æ‰§è¡Œç¯å¢ƒ ] A å‡½æ•°æ‰§è¡Œæ—¶ï¼Œé‡åˆ° B()ï¼Œ è°ƒç”¨ B å‡½æ•°ï¼ŒB å…¥æ ˆ<br>
[ å…¨å±€ç¯å¢ƒï¼ŒA æ‰§è¡Œç¯å¢ƒ ] B æ‰§è¡Œç»“æŸï¼Œå‡ºæ ˆ<br>
[ å…¨å±€ç¯å¢ƒ ] A æ‰§è¡Œç»“æŸå‡ºæ ˆ<br>
[å…¨å±€ç¯å¢ƒé€€å‡º] æ‰€æœ‰ä»£ç æ‰§è¡Œå®Œæ¯• å…¨å±€ç¯å¢ƒå‡ºæ ˆ<br>
å…³äºæ‰§è¡Œæ ˆæœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>JavaScriptæ‰§è¡Œåœ¨å•çº¿ç¨‹ä¸Šï¼Œæ‰€æœ‰çš„ä»£ç éƒ½æ˜¯æ’é˜Ÿæ‰§è¡Œã€‚</li>
<li>ä¸€å¼€å§‹æµè§ˆå™¨æ‰§è¡Œå…¨å±€çš„ä»£ç æ—¶ï¼Œé¦–å…ˆåˆ›å»ºå…¨å±€çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå‹å…¥æ‰§è¡Œæ ˆçš„é¡¶éƒ¨ã€‚</li>
<li>æ¯å½“è¿›å…¥ä¸€ä¸ªå‡½æ•°çš„æ‰§è¡Œå°±ä¼šåˆ›å»ºå‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå¹¶ä¸”æŠŠå®ƒå‹å…¥æ‰§è¡Œæ ˆçš„é¡¶éƒ¨ã€‚å½“å‰å‡½æ•°æ‰§è¡Œå®Œæˆåï¼Œå½“å‰å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡å‡ºæ ˆï¼Œå¹¶ç­‰å¾…åƒåœ¾å›æ”¶ã€‚</li>
<li>æµè§ˆå™¨çš„JSæ‰§è¡Œå¼•æ“æ€»æ˜¯è®¿é—®æ ˆé¡¶çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</li>
<li>å…¨å±€ä¸Šä¸‹æ–‡åªæœ‰å”¯ä¸€çš„ä¸€ä¸ªï¼Œå®ƒåœ¨æµè§ˆå™¨å…³é—­æ—¶å‡ºæ ˆã€‚</li>
<li>å…³äºé€’å½’å‡½æ•°â€”â€”å³å¤šæ¬¡è°ƒç”¨è‡ªèº«çš„å‡½æ•°ï¼Œéœ€è¦ç‰¹åˆ«æ³¨æ„ï¼šæ¯æ¬¡é€’å½’è°ƒç”¨è‡ªèº«éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ä¸Šä¸‹æ–‡ã€‚è¿™ä½¿å¾— JavaScript è¿è¡Œæ—¶èƒ½å¤Ÿè¿½è¸ªé€’å½’çš„å±‚çº§ä»¥åŠä»é€’å½’ä¸­å¾—åˆ°çš„è¿”å›å€¼ï¼Œä½†è¿™ä¹Ÿæ„å‘³ç€æ¯æ¬¡é€’å½’éƒ½ä¼šæ¶ˆè€—å†…å­˜æ¥åˆ›å»ºæ–°çš„ä¸Šä¸‹æ–‡ã€‚</li>
</ul>
<h2 id="åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡æœ‰ä¸¤ä¸ªé˜¶æ®µ1-åˆ›å»ºé˜¶æ®µ-å’Œ-2-æ‰§è¡Œé˜¶æ®µ-ç”Ÿå‘½å‘¨æœŸ">åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡æœ‰ä¸¤ä¸ªé˜¶æ®µï¼š1) åˆ›å»ºé˜¶æ®µ å’Œ 2) æ‰§è¡Œé˜¶æ®µã€‚ï¼ˆç”Ÿå‘½å‘¨æœŸï¼‰</h2>
<p>psï¼šåœ¨æ‰§è¡Œä¸Šä¸‹æ–‡å‡ºæ ˆä¼šæœ‰åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œæœ¬æ–‡ä¸åšæ¢è®¨<br>
åœ¨æŸ¥è¯¢å¤§é‡èµ„æ–™åï¼šå‘ç°æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç»“æ„æœ‰ä¸¤ç§</p>
<h3 id="1-es3-å˜é‡å¯¹è±¡variable-objectthisæŒ‡é’ˆthis-valueä½œç”¨åŸŸé“¾scope-chain">1 es3ï¼š å˜é‡å¯¹è±¡(variable object)ï¼ŒthisæŒ‡é’ˆ(this value)ï¼Œä½œç”¨åŸŸé“¾(scope chain)</h3>
<h3 id="2-es6-è¯æ³•ç¯å¢ƒç»„ä»¶å’Œå˜é‡ç¯å¢ƒç»„ä»¶-ä¼´éšç€letç­‰æ–°å†…å®¹è€Œé‡æ–°å®šä¹‰">2 es6ï¼š è¯æ³•ç¯å¢ƒç»„ä»¶å’Œå˜é‡ç¯å¢ƒç»„ä»¶ ï¼ˆä¼´éšç€letç­‰æ–°å†…å®¹è€Œé‡æ–°å®šä¹‰ï¼‰</h3>
<p>å…ˆæ¥æ¢è®¨es3  å…¶ä¸­é—­åŒ…å’Œæå‡çš„åŸç†å°±åœ¨è¿™é‡Œ<br>
es3 æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç”Ÿå‘½å‘¨æœŸ<br>
åˆ›å»ºé˜¶æ®µï¼š åˆ›å»ºå˜é‡å¯¹è±¡ å»ºç«‹ä½œç”¨åŸŸé“¾ ç¡®å®šthisæŒ‡é’ˆæŒ‡å‘<br>
æŒ‡è¡Œé˜¶æ®µï¼š å˜é‡å¯¹è±¡VO å˜æˆæ´»åŠ¨å¯¹è±¡ AO<br>
å›æ”¶é˜¶æ®µï¼š æ‰§è¡Œä¸Šä¸‹æ–‡å‡ºæ ˆç­‰å¾…åƒåœ¾å›æ”¶æœºåˆ¶</p>
<h3 id="å˜é‡å¯¹è±¡">å˜é‡å¯¹è±¡</h3>
<p>å˜é‡å¯¹è±¡(variable object) æ˜¯ä¸æ‰§è¡Œä¸Šä¸‹æ–‡ç›¸å…³çš„ æ•°æ®ä½œç”¨åŸŸ(scope of data) ã€‚<br>
å®ƒæ˜¯ä¸ä¸Šä¸‹æ–‡å…³è”çš„ç‰¹æ®Šå¯¹è±¡ï¼Œç”¨äºå­˜å‚¨è¢«å®šä¹‰åœ¨ä¸Šä¸‹æ–‡ä¸­çš„ å˜é‡(variables) å’Œ å‡½æ•°å£°æ˜(function declarations) å’Œå‡½æ•°çš„å½¢å‚</p>
<ul>
<li>å…¨å±€ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ (VO === this === global)</li>
</ul>
<p>åªæœ‰å…¨å±€ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡å…è®¸é€šè¿‡VOçš„å±æ€§åç§°æ¥é—´æ¥è®¿é—®(å› ä¸ºåœ¨å…¨å±€ä¸Šä¸‹æ–‡é‡Œï¼Œå…¨å±€å¯¹è±¡è‡ªèº«å°±æ˜¯å˜é‡å¯¹è±¡ï¼Œç¨åä¼šè¯¦ç»†ä»‹ç»)ï¼Œåœ¨å…¶å®ƒä¸Šä¸‹æ–‡ä¸­æ˜¯ä¸èƒ½ç›´æ¥è®¿é—®VOå¯¹è±¡çš„ï¼Œå› ä¸ºå®ƒåªæ˜¯å†…éƒ¨æœºåˆ¶çš„ä¸€ä¸ªå®ç°ã€‚<br>
å…¨å±€å¯¹è±¡å°±æ˜¯å…¨å±€å˜é‡å¯¹è±¡<br>
å…¨å±€å¯¹è±¡åˆå§‹åˆ›å»ºé˜¶æ®µå°†Mathã€Stringã€Dateã€parseIntä½œä¸ºè‡ªèº«å±æ€§ï¼Œç­‰å±æ€§åˆå§‹åŒ–ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥æœ‰é¢å¤–åˆ›å»ºçš„å…¶å®ƒå¯¹è±¡ä½œä¸ºå±æ€§ï¼ˆå…¶å¯ä»¥æŒ‡å‘åˆ°å…¨å±€å¯¹è±¡è‡ªèº«ï¼‰ã€‚ä¾‹å¦‚ï¼Œåœ¨DOMä¸­ï¼Œå…¨å±€å¯¹è±¡çš„windowå±æ€§å°±å¯ä»¥å¼•ç”¨å…¨å±€å¯¹è±¡è‡ªèº«(å½“ç„¶ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„å…·ä½“å®ç°éƒ½æ˜¯è¿™æ ·)ï¼š</p>
<pre><code>global = {
  Math: &lt;...&gt;,
  String: &lt;...&gt;
  ...
  ...
  window: global //å¼•ç”¨è‡ªèº«
};
</code></pre>
<p>VO(globalContext) === global;</p>
<ul>
<li>å‡½æ•°ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡</li>
</ul>
<p>åœ¨å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼ŒVOæ˜¯ä¸èƒ½ç›´æ¥è®¿é—®çš„ï¼Œæ­¤æ—¶ç”±æ´»åŠ¨å¯¹è±¡(activation object,ç¼©å†™ä¸ºAO)æ‰®æ¼”VOçš„è§’è‰²ã€‚<br>
æ´»åŠ¨å¯¹è±¡æ˜¯åœ¨è¿›å…¥å‡½æ•°ä¸Šä¸‹æ–‡æ—¶åˆ»è¢«åˆ›å»ºçš„ï¼Œå®ƒé€šè¿‡å‡½æ•°çš„argumentså±æ€§åˆå§‹åŒ–ã€‚argumentså±æ€§çš„å€¼æ˜¯Argumentså¯¹è±¡ã€‚<br>
Argumentså¯¹è±¡æ˜¯æ´»åŠ¨å¯¹è±¡çš„ä¸€ä¸ªå±æ€§ï¼Œå®ƒåŒ…æ‹¬å¦‚ä¸‹å±æ€§ï¼š<br>
callee â€” æŒ‡å‘å½“å‰å‡½æ•°çš„å¼•ç”¨<br>
length â€” çœŸæ­£ä¼ é€’çš„å‚æ•°ä¸ªæ•°<br>
properties-indexes (å­—ç¬¦ä¸²ç±»å‹çš„æ•´æ•°) å±æ€§çš„å€¼å°±æ˜¯å‡½æ•°çš„å‚æ•°å€¼(æŒ‰å‚æ•°åˆ—è¡¨ä»å·¦åˆ°å³æ’åˆ—)ã€‚ properties-indexeså†…éƒ¨å…ƒç´ çš„ä¸ªæ•°ç­‰äºarguments.length. properties-indexes çš„å€¼å’Œå®é™…ä¼ é€’è¿›æ¥çš„å‚æ•°ä¹‹é—´æ˜¯å…±äº«çš„ã€‚<br>
ä»¥ä¸‹æ˜¯ä¾‹å­ä¾›ç†è§£ï¼š</p>
<pre><code>function foo(x, y, z) {
  // å£°æ˜çš„å‡½æ•°å‚æ•°æ•°é‡arguments (x, y, z)
  alert(foo.length); // 3
  // çœŸæ­£ä¼ è¿›æ¥çš„å‚æ•°ä¸ªæ•°(only x, y)
  alert(arguments.length); // 2
  // å‚æ•°çš„calleeæ˜¯å‡½æ•°è‡ªèº«
  alert(arguments.callee === foo); // true
  // å‚æ•°å…±äº«
  alert(x === arguments[0]); // true
  alert(x); // 10
  arguments[0] = 20;
  alert(x); // 20
  x = 30;
  alert(arguments[0]); // 30
  // ä¸è¿‡ï¼Œæ²¡æœ‰ä¼ è¿›æ¥çš„å‚æ•°zï¼Œå’Œå‚æ•°çš„ç¬¬3ä¸ªç´¢å¼•å€¼æ˜¯ä¸å…±äº«çš„
  z = 40;
  alert(arguments[2]); // undefined
  arguments[2] = 50;
  alert(z); // 40
}
foo(10, 20);
</code></pre>
<p>ä¸¤ç§å˜é‡å¯¹è±¡å·²ç»è§£é‡Šå®Œæ¯•<br>
æ‰§è¡Œä¸Šä¸‹æ–‡åˆ›å»ºé˜¶æ®µç»“æŸå ç°åœ¨åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡ä¹‹å‰ VOçš„å€¼å«æœ‰ï¼š<br>
å‡½æ•°çš„æ‰€æœ‰å½¢å‚(å¦‚æœæˆ‘ä»¬æ˜¯åœ¨å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­)<br>
ç”±åç§°å’Œå¯¹åº”å€¼ç»„æˆçš„ä¸€ä¸ªå˜é‡å¯¹è±¡çš„å±æ€§è¢«åˆ›å»ºï¼›æ²¡æœ‰ä¼ é€’å¯¹åº”å‚æ•°çš„è¯ï¼Œé‚£ä¹ˆç”±åç§°å’Œundefinedå€¼ç»„æˆçš„ä¸€ç§å˜é‡å¯¹è±¡çš„å±æ€§ä¹Ÿå°†è¢«åˆ›å»ºã€‚<br>
æ‰€æœ‰å‡½æ•°å£°æ˜(FunctionDeclaration, FD)<br>
ç”±åç§°å’Œå¯¹åº”å€¼ï¼ˆå‡½æ•°å¯¹è±¡(function-object)ï¼‰ç»„æˆä¸€ä¸ªå˜é‡å¯¹è±¡çš„å±æ€§è¢«åˆ›å»ºï¼›å¦‚æœå˜é‡å¯¹è±¡å·²ç»å­˜åœ¨ç›¸åŒåç§°çš„å±æ€§ï¼Œåˆ™å®Œå…¨æ›¿æ¢è¿™ä¸ªå±æ€§ã€‚<br>
æ‰€æœ‰å˜é‡å£°æ˜(var, VariableDeclaration)<br>
ç”±åç§°å’Œå¯¹åº”å€¼ï¼ˆundefinedï¼‰ç»„æˆä¸€ä¸ªå˜é‡å¯¹è±¡çš„å±æ€§è¢«åˆ›å»ºï¼›å¦‚æœå˜é‡åç§°è·Ÿå·²ç»å£°æ˜çš„å½¢å¼å‚æ•°æˆ–å‡½æ•°ç›¸åŒï¼Œåˆ™å˜é‡å£°æ˜ä¸ä¼šå¹²æ‰°å·²ç»å­˜åœ¨çš„è¿™ç±»å±æ€§ã€‚<br>
å¯ä»¥æ¥çœ‹è¿™ä¸ªä¾‹å­</p>
<pre><code>function outerFun (arg1, arg2) {
    var outerV1 = 1
    var outerV2 = 2
    function innerFun1 () {
        var innerV1 = 3;
        var innerV2 = 4;
        console.log('i am innerFun1...')
    }
    function innerFun2 () {
        console.log('i am innerFun2...')
    }
    function outerV2 () {
        return 'i am outerV2'
    }
}
outerFun(1);
</code></pre>
<p>æ­¤å¤„VOå†…å®¹æœ‰ä¸‰éƒ¨åˆ†</p>
<ol>
<li>argumentså±æ€§ å³Arguments å¯¹è±¡<br>
arguments:  Arguments Object<br>
è¿™ä¸ªå¯¹è±¡å±æ€§  æœ‰<br>
arguments.length: 1 åªä¼ å€¼äº†ä¸€ä¸ª<br>
arguments.callee: outerFunçš„åœ°å€<br>
arguments[@@iterator]<br>
è¿”å›ä¸€ä¸ªæ–°çš„Array è¿­ä»£å™¨ å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«å‚æ•°ä¸­æ¯ä¸ªç´¢å¼•çš„å€¼ã€‚</li>
<li>æ‰€æœ‰å˜é‡çš„å£°æ˜ï¼šæ­¤æ—¶ä¸ºundefinde<br>
outerV1: undefined<br>
outerV2: undefined</li>
<li>æ‰€æœ‰å‡½æ•°çš„å£°æ˜ï¼š å€¼ä¸ºè¯¥å‡½æ•°æ‰€åœ¨å†…å­˜çš„åœ°å€<br>
innerFun1 : innerFun1 reference  ï¼ˆ innerFun1 å¼•ç”¨ï¼‰<br>
innerFun2 : innerFun2 reference  ï¼ˆ innerFun2 å¼•ç”¨ï¼‰</li>
</ol>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Node æ¡†æ¶ Expresså­¦ä¹ ]]></title>
        <id>https://huyifu.github.io/post/node-kuang-jia-express-xue-xi/</id>
        <link href="https://huyifu.github.io/post/node-kuang-jia-express-xue-xi/">
        </link>
        <updated>2021-03-30T08:43:15.000Z</updated>
        <summary type="html"><![CDATA[<p>Expressæ¡†æ¶<br>
æä¾›ç®€æ´è·¯ç”±å®šä¹‰æ–¹å¼<br>
å¯¹HTTPè¯·æ±‚å‚æ•° ç®€åŒ–å¤„ç†<br>
æ”¯æŒæ¨¡æ¿å¼•æ“<br>
æä¾›ä¸­é—´ä»¶ æ§åˆ¶HTTPè¯·æ±‚</p>
<p>ä¸­é—´ä»¶<br>
ä¸€å †æ–¹æ³• æ¥æ”¶è¯·æ±‚ å¯¹è¯·æ±‚å“åº”  ä¹Ÿå¯ä»¥äº¤ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ç»§ç»­å¤„ç†<br>
ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆ  ä¸­é—´ä»¶æ–¹æ³•å’Œè¯·æ±‚å¤„ç†å‡½æ•°<br>
app.get('è¯·æ±‚è·¯å¾„','å¤„ç†å‡½æ•°')   æ–¹æ³•expressæä¾›</p>
<p>ç®€å•çš„åº”ç”¨ å°†.getè¯·æ±‚åˆ†æˆä¸¤ä¸ªä¸­é—´ä»¶è¿›è¡Œå¤„ç†<br>
next å°†è¯·æ±‚çš„æ§åˆ¶æƒäº¤ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶<br>
//å¼•å…¥expressæ¡†æ¶</p>
<pre><code>const express = require('express');
const app = express();//åˆ›å»ºæœåŠ¡å™¨
app.get('/',(req,res,next) =&gt;{
    req.addname= &quot;åœ¨è¯·æ±‚å¤´æ·»åŠ çš„å±æ€§&quot;;
    next();
});
app.get('/',(req,res) =&gt;{
    res.send(req.addname);
});
app.listen(3000);
console.log(&quot;ç½‘ç«™å¯åŠ¨ ç«¯å£3000&quot;);
</code></pre>
<p>app.use   åŒ¹é…æ‰€æœ‰çš„è¯·æ±‚  å› æ­¤å¦‚æœåç»­è¦ç»§ç»­å¤„ç† è¦ä½¿ç”¨next()<br>
app.use('/æŸä¸€ä¸ªè¯·æ±‚è·¯å¾„',(req,res,next))  å¯ä»¥æŒ‡å®šæŸä¸€ä¸ªè·¯å¾„åŒ¹é…çš„æ‰€æœ‰è¯·æ±‚</p>
<p>ä¸­é—´ä»¶çš„åº”ç”¨<br>
1å¯¹é¡µé¢è®¿é—®æŸè·¯å¾„è¿›è¡Œç™»å½•æ‹¦æˆª  1 use è¿›è¡Œåˆ¤æ–­ å¦‚æœå·²ç»ç™»å½•åˆ™æ”¾è¡Œnext() 2 æ²¡æœ‰ç™»å½• è¿”å›æ²¡æœ‰ç™»å½•çš„ä¿¡æ¯<br>
2 é¡µé¢ç»´æŠ¤  ç›´æ¥æ”¾æœ€å‰é¢è¿›è¡Œæ‹¦æˆª   ä¸è®¾ç½®è·¯å¾„åˆ™åŒ¹é…æ‰€æœ‰è·¯å¾„<br>
3 è‡ªå®šä¹‰404è·¯å¾„  æ”¾åœ¨æœ€åé¢æ²¡æœ‰åŒ¹é…çš„è·¯å¾„  ä¸è®¾ç½®è·¯å¾„åˆ™åŒ¹é…æ‰€æœ‰è·¯å¾„</p>
<p>é”™è¯¯å¤„ç†ä¸­é—´ä»¶</p>
<pre><code> thorow new Error('å‘ç”Ÿäº†é”™è¯¯'); 
app.use( (err,req,res,next) =&gt;{
	//err ä¸ºæ‰‹åŠ¨æŠ›å‡ºçš„Errorå¯¹è±¡
	res.status(500).send(err.message); //è¿”å› errå¯¹è±¡çš„é”™è¯¯ä¿¡æ¯å±æ€§
} )
</code></pre>
<p>æ•è·å¼‚æ­¥ä»£ç é”™è¯¯<br>
try catchå—</p>
<pre><code>const promisify = require('util').promisify
const NewreadFile = promisify('fs.readFile') æ”¹é€ è¯»å–æ–‡ä»¶æˆè¿”å›promiseå¯¹è±¡çš„å¼‚æ­¥å‡½æ•°
app.get('/', async (req,res,next) =&gt;{
     try {
   await NewreadFile('.');
}
catch (ex){
   next(ex);	
}
})
</code></pre>
<p>æ•è·åˆ°é”™è¯¯çš„è¯ ç¨‹åºä¸ä¼šå› ä¸ºè¿™ä¸ªé”™è¯¯è€Œç»ˆæ­¢è¿›è¡Œâ€”â€” å¥å£®æ€§</p>
<p>æ„å»ºæ¨¡å—åŒ–è·¯ç”±<br>
expressä¸‹çš„Router è·¯ç”±å¯¹è±¡<br>
ä¸ºè¿™ä¸ªè·¯ç”±å¯¹è±¡å¯ä»¥åŒ¹é…è¯·æ±‚è·¯å¾„</p>
<pre><code>const express = require('express');
const app = express();
//åˆ›å»ºè·¯ç”±å¯¹è±¡
const home = express.Router();
app.use('/home',home);
//åˆ›å»ºäºŒçº§è·¯ç”±
home.use('/index',(req,res)=&gt;{
    res.send(&quot;äºŒçº§è·¯ç”± /home/indexï¼&quot;);
})
app.listen(3000);
</code></pre>
<p>å…¶ä¸­homeæ¨¡å— å¯ä»¥å†™åœ¨åˆ«çš„jsä¸­ é€šè¿‡å¯¼å…¥å¯¼å‡ºè¿›è¡Œæ¨¡å—çš„ä½¿ç”¨<br>
åœ¨ä¸»index.js ä¸­<br>
è¿™æ ·åˆ›å»ºäºŒçº§è·¯ç”±<br>
const xx = require('')<br>
app.use('/xxè·¯å¾„', xx);</p>
<p>Getå‚æ•°<br>
åœ¨è¯·æ±‚å‡½æ•°ä¸­ ä½¿ç”¨req.query è‡ªåŠ¨å°†è¯·æ±‚å‚æ•°è·å–å¹¶è½¬åŒ–æˆå¯¹è±¡çš„å½¢å¼<br>
app.get('/index',(req,res)=&gt;{<br>
res.send(req.query);<br>
});</p>
<p>Post è¯·æ±‚å‚æ•°è·å–<br>
ä½¿ç”¨å€ŸåŠ©ç¬¬ä¸‰åŒ… body-parser<br>
const bodyParser = require('body-parser');<br>
è€Œä¸”éœ€è¦åœ¨æœ€å¼€å§‹å¯¹è¿™ä¸ªæ¨¡å—è¿›è¡Œé…ç½® é»˜è®¤<br>
app.use(bodyParser.urlencoded( { extended: false} );</p>
<pre><code>const bodyParser = require('body-parser');
const express = require('express');
const app = express();
app.use(bodyParser.urlencoded({ extended: false}));
app.post('/index',(req,res)=&gt;{
    res.send(req.body);
});
app.listen(3000);
</code></pre>
<p>è·¯ç”±å‚æ•° è·¯ç”±é‡Œé¢é™„å¸¦æ•°æ® â€”â€”  getä¼ é€’å’Œè·å–å‚æ•°çš„å¦ä¸€ç§æ–¹å¼</p>
]]></summary>
        <content type="html"><![CDATA[<p>Expressæ¡†æ¶<br>
æä¾›ç®€æ´è·¯ç”±å®šä¹‰æ–¹å¼<br>
å¯¹HTTPè¯·æ±‚å‚æ•° ç®€åŒ–å¤„ç†<br>
æ”¯æŒæ¨¡æ¿å¼•æ“<br>
æä¾›ä¸­é—´ä»¶ æ§åˆ¶HTTPè¯·æ±‚</p>
<p>ä¸­é—´ä»¶<br>
ä¸€å †æ–¹æ³• æ¥æ”¶è¯·æ±‚ å¯¹è¯·æ±‚å“åº”  ä¹Ÿå¯ä»¥äº¤ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ç»§ç»­å¤„ç†<br>
ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆ  ä¸­é—´ä»¶æ–¹æ³•å’Œè¯·æ±‚å¤„ç†å‡½æ•°<br>
app.get('è¯·æ±‚è·¯å¾„','å¤„ç†å‡½æ•°')   æ–¹æ³•expressæä¾›</p>
<p>ç®€å•çš„åº”ç”¨ å°†.getè¯·æ±‚åˆ†æˆä¸¤ä¸ªä¸­é—´ä»¶è¿›è¡Œå¤„ç†<br>
next å°†è¯·æ±‚çš„æ§åˆ¶æƒäº¤ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶<br>
//å¼•å…¥expressæ¡†æ¶</p>
<pre><code>const express = require('express');
const app = express();//åˆ›å»ºæœåŠ¡å™¨
app.get('/',(req,res,next) =&gt;{
    req.addname= &quot;åœ¨è¯·æ±‚å¤´æ·»åŠ çš„å±æ€§&quot;;
    next();
});
app.get('/',(req,res) =&gt;{
    res.send(req.addname);
});
app.listen(3000);
console.log(&quot;ç½‘ç«™å¯åŠ¨ ç«¯å£3000&quot;);
</code></pre>
<p>app.use   åŒ¹é…æ‰€æœ‰çš„è¯·æ±‚  å› æ­¤å¦‚æœåç»­è¦ç»§ç»­å¤„ç† è¦ä½¿ç”¨next()<br>
app.use('/æŸä¸€ä¸ªè¯·æ±‚è·¯å¾„',(req,res,next))  å¯ä»¥æŒ‡å®šæŸä¸€ä¸ªè·¯å¾„åŒ¹é…çš„æ‰€æœ‰è¯·æ±‚</p>
<p>ä¸­é—´ä»¶çš„åº”ç”¨<br>
1å¯¹é¡µé¢è®¿é—®æŸè·¯å¾„è¿›è¡Œç™»å½•æ‹¦æˆª  1 use è¿›è¡Œåˆ¤æ–­ å¦‚æœå·²ç»ç™»å½•åˆ™æ”¾è¡Œnext() 2 æ²¡æœ‰ç™»å½• è¿”å›æ²¡æœ‰ç™»å½•çš„ä¿¡æ¯<br>
2 é¡µé¢ç»´æŠ¤  ç›´æ¥æ”¾æœ€å‰é¢è¿›è¡Œæ‹¦æˆª   ä¸è®¾ç½®è·¯å¾„åˆ™åŒ¹é…æ‰€æœ‰è·¯å¾„<br>
3 è‡ªå®šä¹‰404è·¯å¾„  æ”¾åœ¨æœ€åé¢æ²¡æœ‰åŒ¹é…çš„è·¯å¾„  ä¸è®¾ç½®è·¯å¾„åˆ™åŒ¹é…æ‰€æœ‰è·¯å¾„</p>
<p>é”™è¯¯å¤„ç†ä¸­é—´ä»¶</p>
<pre><code> thorow new Error('å‘ç”Ÿäº†é”™è¯¯'); 
app.use( (err,req,res,next) =&gt;{
	//err ä¸ºæ‰‹åŠ¨æŠ›å‡ºçš„Errorå¯¹è±¡
	res.status(500).send(err.message); //è¿”å› errå¯¹è±¡çš„é”™è¯¯ä¿¡æ¯å±æ€§
} )
</code></pre>
<p>æ•è·å¼‚æ­¥ä»£ç é”™è¯¯<br>
try catchå—</p>
<pre><code>const promisify = require('util').promisify
const NewreadFile = promisify('fs.readFile') æ”¹é€ è¯»å–æ–‡ä»¶æˆè¿”å›promiseå¯¹è±¡çš„å¼‚æ­¥å‡½æ•°
app.get('/', async (req,res,next) =&gt;{
     try {
   await NewreadFile('.');
}
catch (ex){
   next(ex);	
}
})
</code></pre>
<p>æ•è·åˆ°é”™è¯¯çš„è¯ ç¨‹åºä¸ä¼šå› ä¸ºè¿™ä¸ªé”™è¯¯è€Œç»ˆæ­¢è¿›è¡Œâ€”â€” å¥å£®æ€§</p>
<p>æ„å»ºæ¨¡å—åŒ–è·¯ç”±<br>
expressä¸‹çš„Router è·¯ç”±å¯¹è±¡<br>
ä¸ºè¿™ä¸ªè·¯ç”±å¯¹è±¡å¯ä»¥åŒ¹é…è¯·æ±‚è·¯å¾„</p>
<pre><code>const express = require('express');
const app = express();
//åˆ›å»ºè·¯ç”±å¯¹è±¡
const home = express.Router();
app.use('/home',home);
//åˆ›å»ºäºŒçº§è·¯ç”±
home.use('/index',(req,res)=&gt;{
    res.send(&quot;äºŒçº§è·¯ç”± /home/indexï¼&quot;);
})
app.listen(3000);
</code></pre>
<p>å…¶ä¸­homeæ¨¡å— å¯ä»¥å†™åœ¨åˆ«çš„jsä¸­ é€šè¿‡å¯¼å…¥å¯¼å‡ºè¿›è¡Œæ¨¡å—çš„ä½¿ç”¨<br>
åœ¨ä¸»index.js ä¸­<br>
è¿™æ ·åˆ›å»ºäºŒçº§è·¯ç”±<br>
const xx = require('')<br>
app.use('/xxè·¯å¾„', xx);</p>
<p>Getå‚æ•°<br>
åœ¨è¯·æ±‚å‡½æ•°ä¸­ ä½¿ç”¨req.query è‡ªåŠ¨å°†è¯·æ±‚å‚æ•°è·å–å¹¶è½¬åŒ–æˆå¯¹è±¡çš„å½¢å¼<br>
app.get('/index',(req,res)=&gt;{<br>
res.send(req.query);<br>
});</p>
<p>Post è¯·æ±‚å‚æ•°è·å–<br>
ä½¿ç”¨å€ŸåŠ©ç¬¬ä¸‰åŒ… body-parser<br>
const bodyParser = require('body-parser');<br>
è€Œä¸”éœ€è¦åœ¨æœ€å¼€å§‹å¯¹è¿™ä¸ªæ¨¡å—è¿›è¡Œé…ç½® é»˜è®¤<br>
app.use(bodyParser.urlencoded( { extended: false} );</p>
<pre><code>const bodyParser = require('body-parser');
const express = require('express');
const app = express();
app.use(bodyParser.urlencoded({ extended: false}));
app.post('/index',(req,res)=&gt;{
    res.send(req.body);
});
app.listen(3000);
</code></pre>
<p>è·¯ç”±å‚æ•° è·¯ç”±é‡Œé¢é™„å¸¦æ•°æ® â€”â€”  getä¼ é€’å’Œè·å–å‚æ•°çš„å¦ä¸€ç§æ–¹å¼</p>
<!-- more -->
<p>app.get('/find/:id/:name', (req,res)=&gt; console.log(req.params)ğŸ˜‰ req.paramsä¸ºå¯¹è±¡<br>
tipï¼šå®¢æˆ·ç«¯è®¿é—®findè·¯å¾„æ—¶å¿…é¡»å¸¦æœ‰id nameå‚æ•° å¦åˆ™æ— æ³•è·å–è¯·æ±‚<br>
http://localhost:3000/find/111/name<br>
{id:111,name:name}</p>
<p>è®¿é—®é™æ€æ–‡ä»¶<br>
ä½¿ç”¨express.static æ–¹æ³•<br>
app.use(express.static('æ”¾ç½®é™æ€æ–‡ä»¶çš„ç›®å½•'))  å®¢æˆ·ç«¯å¯ç›´æ¥é€šè¿‡è·¯å¾„è®¿é—®åˆ°</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[JS ç®­å¤´å‡½æ•°]]></title>
        <id>https://huyifu.github.io/post/js-jian-tou-han-shu/</id>
        <link href="https://huyifu.github.io/post/js-jian-tou-han-shu/">
        </link>
        <updated>2021-03-29T12:09:30.000Z</updated>
        <content type="html"><![CDATA[<p>å¼•è¨€ï¼šåœ¨å­¦ä¹ nonde å›è°ƒå‡½æ•°æ—¶é¢‘ç¹å‡ºç°ç®­å¤´å‡½æ•° æ­¤æ–‡æ¥è¯¦ç»†äº†è§£ç®­å¤´å‡½æ•°æ·±å…¥çš„ç‰¹æ€§ã€‚</p>
<h3 id="ç®­å¤´å‡½æ•°è¡¨è¾¾å¼çš„è¯­æ³•æ¯”å‡½æ•°è¡¨è¾¾å¼æ›´ç®€æ´å¹¶ä¸”æ²¡æœ‰è‡ªå·±çš„thisargumentssupernewtarget-ç®­å¤´å‡½æ•°è¡¨è¾¾å¼æ›´é€‚ç”¨äºé‚£äº›æœ¬æ¥éœ€è¦åŒ¿åå‡½æ•°çš„åœ°æ–¹å¹¶ä¸”å®ƒä¸èƒ½ç”¨ä½œæ„é€ å‡½æ•°-å› ä¸ºæ„é€ å‡½æ•°ç”¨thisæŒ‡å‘æ–°æ„å»ºçš„å¯¹è±¡">ç®­å¤´å‡½æ•°è¡¨è¾¾å¼çš„è¯­æ³•æ¯”å‡½æ•°è¡¨è¾¾å¼æ›´ç®€æ´ï¼Œå¹¶ä¸”æ²¡æœ‰è‡ªå·±çš„thisï¼Œargumentsï¼Œsuperï¼Œnew.targetã€‚ç®­å¤´å‡½æ•°è¡¨è¾¾å¼æ›´é€‚ç”¨äºé‚£äº›æœ¬æ¥éœ€è¦åŒ¿åå‡½æ•°çš„åœ°æ–¹ï¼Œå¹¶ä¸”å®ƒä¸èƒ½ç”¨ä½œæ„é€ å‡½æ•°ã€‚å› ä¸ºæ„é€ å‡½æ•°ç”¨thisæŒ‡å‘æ–°æ„å»ºçš„å¯¹è±¡ã€‚</h3>
<p>äº”ç§åŸºç¡€è¡¨è¾¾å½¢å¼</p>
<pre><code>1. (param1, param2, â€¦, paramN) =&gt; { statements } //æ ‡å‡† å‚æ•°1~N æ‰§è¡Œstatements
2. (param1, param2, â€¦, paramN) =&gt; expression // åªæœ‰ä¸€ä¸ªè¡¨è¾¾å¼ ç›¸å½“äº ç›¸å½“äºï¼š(param1, param2, â€¦, paramN) =&gt;{ return expression; }
3. singleParam =&gt; { statements }  //åªæœ‰ä¸€ä¸ªå‚æ•°å¯ä¸å†™ï¼ˆï¼‰
4. () =&gt;{statements}  //æ— å‚æ•°ä½¿ç”¨ï¼ˆï¼‰ åº”ç”¨1.
5.() =&gt; expression   //æ— å‚æ•°ä½¿ç”¨ï¼ˆï¼‰ åº”ç”¨2.
</code></pre>
<p>æ­¤å¤–è¿˜æœ‰å…¶ä»–è¡¨è¾¾å½¢å¼</p>
<pre><code>//åŠ æ‹¬å·çš„å‡½æ•°ä½“è¿”å›å¯¹è±¡å­—é¢é‡è¡¨è¾¾å¼ï¼š
params =&gt; ({foo: bar})
//æ”¯æŒå‰©ä½™å‚æ•°å’Œé»˜è®¤å‚æ•°
(param1, param2, ...rest) =&gt; { statements }
(param1 = defaultValue1, param2, â€¦, paramN = defaultValueN) =&gt; {
statements }
//åŒæ ·æ”¯æŒå‚æ•°åˆ—è¡¨è§£æ„
let f = ([a, b] = [1, 2], {x: c} = {x: a + b}) =&gt; a + b + c;
f();  // 6
</code></pre>
<h3 id="ç®­å¤´å‡½æ•°æ²¡æœ‰å•ç‹¬çš„thisç®­å¤´å‡½æ•°ä¸ä¼šåˆ›å»ºè‡ªå·±çš„thiså®ƒåªä¼šä»è‡ªå·±çš„ä½œç”¨åŸŸé“¾çš„ä¸Šä¸€å±‚ç»§æ‰¿this">ç®­å¤´å‡½æ•°æ²¡æœ‰å•ç‹¬çš„thisï¼Œç®­å¤´å‡½æ•°ä¸ä¼šåˆ›å»ºè‡ªå·±çš„this,å®ƒåªä¼šä»è‡ªå·±çš„ä½œç”¨åŸŸé“¾çš„ä¸Šä¸€å±‚ç»§æ‰¿thisã€‚</h3>
<p>ä»¥ä¸‹ä¸ºç”¨thisæ—¶å€™å‡ºç°çš„ä¸€äº›é—®é¢˜</p>
<pre><code>function Counter() {
  this.num = 0;
  this.timer = setInterval(function add() {
    this.num++;
    console.log(this.num);
  }, 1000);
}
var a = new Counter();
</code></pre>
<p>è¾“å‡ºï¼š<br>
NaN<br>
.. 1sä¸€ä¸ª<br>
thisæŒ‡å‘windowå¯¹è±¡  thisç†è§£å¦ä¸€ç¯‡è¿›è¡Œæ·±å…¥æ¢è®¨  æ­¤å¤„å‡ºç°é—®é¢˜<br>
å½“ä½¿ç”¨ç®­å¤´å‡½æ•°æ”¹å†™</p>
<pre><code>function Counter() {
  this.num = 0;
  this.timer = setInterval(()=&gt;{
      this.num++;
      console.log(num);
  },1000)
}
var a = new Counter();
</code></pre>
<p>é¢„æœŸè¾“å‡º<br>
1<br>
2<br>
..</p>
<h3 id="é€šè¿‡call-applyè°ƒç”¨ç®­å¤´å‡½æ•°">é€šè¿‡callã€applyè°ƒç”¨ç®­å¤´å‡½æ•°</h3>
<p>ç”±äºç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„thisæŒ‡é’ˆï¼Œé€šè¿‡call()ã€apply()æ–¹æ³•è°ƒç”¨æ—¶ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¼šè¢«å¿½ç•¥ã€‚ï¼ˆç®­å¤´å‡½æ•°ä¸­è‹¥ç”¨äº†thisï¼Œè¿™ä¸ªthisæŒ‡å‘åŒ…è£¹ç®­å¤´å‡½æ•°çš„ç¬¬ä¸€ä¸ªæ™®é€šå‡½æ•°çš„ thisã€‚ï¼‰</p>
<h3 id="ä¸ç»‘å®šarguments">ä¸ç»‘å®šarguments</h3>
<p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½¿ç”¨å‰©ä½™å‚æ•°æ˜¯ç›¸è¾ƒäºargumentså¯¹è±¡çš„æ›´å¥½é€‰æ‹©ã€‚</p>
<h3 id="ç®­å¤´å‡½æ•°æ²¡æœ‰prototypeå±æ€§">ç®­å¤´å‡½æ•°æ²¡æœ‰prototypeå±æ€§ã€‚</h3>
<pre><code>var Foo = () =&gt; {};
console.log(Foo.prototype); // undefined
</code></pre>
<h3 id="é—­åŒ…">é—­åŒ…</h3>
<pre><code>// æ ‡å‡†çš„é—­åŒ…å‡½æ•°
function A(){
      var i=0;
      return function b(){
              return (++i);
      };
};
var v=A();
v();    //1
v();    //2
//ç®­å¤´å‡½æ•°ä½“çš„é—­åŒ…ï¼ˆ i=0 æ˜¯é»˜è®¤å‚æ•°ï¼‰
var Add = (i=0) =&gt; {return (() =&gt; (++i) )};
var v = Add();
v();           //1
v();           //2
//å› ä¸ºä»…æœ‰ä¸€ä¸ªè¿”å›ï¼Œreturn åŠæ‹¬å·ï¼ˆï¼‰ä¹Ÿå¯ä»¥çœç•¥
var Add = (i=0)=&gt; ()=&gt; (++i);
</code></pre>
<h2 id="æ€»ç»“">æ€»ç»“ï¼š</h2>
<ul>
<li>æ²¡æœ‰ this</li>
<li>æ²¡æœ‰ arguments</li>
<li>ä¸èƒ½ä½¿ç”¨ new è¿›è¡Œè°ƒç”¨</li>
<li>å®ƒä»¬ä¹Ÿæ²¡æœ‰ super</li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[JS å›è°ƒå‡½æ•°]]></title>
        <id>https://huyifu.github.io/post/js-hui-diao-han-shu/</id>
        <link href="https://huyifu.github.io/post/js-hui-diao-han-shu/">
        </link>
        <updated>2021-03-29T11:06:11.000Z</updated>
        <content type="html"><![CDATA[<p>å¼•è¨€ï¼šåœ¨å­¦ä¹ nodeä¸­ï¼Œå¼€å§‹å¤§é‡çš„ä½¿ç”¨å¼‚æ­¥åŒ–ç¼–ç¨‹ è€Œå¼‚æ­¥å‡½æ•°ä¸å›è°ƒå‡½æ•°æœ‰ç€ç´§å¯†çš„è¿æ¥ æ­¤æ–‡æ¥æ·±å…¥å›è°ƒå‡½æ•°</p>
<h2 id="å›è°ƒå‡½æ•°æ¦‚å¿µ">å›è°ƒå‡½æ•°æ¦‚å¿µ</h2>
<p>A callback is a function that is passed as an argument to another function and is executed after its parent function has completed.</p>
<h3 id="å››çº§æ°´å¹³ç¿»è¯‘-å›è°ƒå‡½æ•°æ˜¯ä¸€ä¸ªé€šè¿‡ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°å¹¶ä¸”åœ¨çˆ¶å‡½æ•°å·²ç»å®Œæˆåæ‰§è¡Œçš„å‡½æ•°">å››çº§æ°´å¹³ç¿»è¯‘ï¼š å›è°ƒå‡½æ•°æ˜¯ä¸€ä¸ªé€šè¿‡ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°å¹¶ä¸”åœ¨çˆ¶å‡½æ•°å·²ç»å®Œæˆåæ‰§è¡Œçš„å‡½æ•°ğŸ¤§</h3>
<h3 id="è‡ªå·±çš„è¯æ¥è®²-å›è°ƒå‡½æ•°æ˜¯ä¸€ä¸ªå‡½æ•°çš„å‚æ•°å¹¶ä¸”åœ¨è¿™ä¸ªå‡½æ•°é‡Œå¯ä»¥è°ƒç”¨è¿™ä¸ªå›è°ƒå‡½æ•°è‡³äºè¿™ä¸ªå›è°ƒå‡½æ•°ä»€ä¹ˆæ—¶å€™è°ƒç”¨-æœ‰çš„æ˜¯å¯ä»¥æŒ‡å®šè°ƒç”¨-æœ‰çš„æ˜¯æ»¡è¶³ç‰¹æ®Šè¦æ±‚åç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨">è‡ªå·±çš„è¯æ¥è®²ï¼š å›è°ƒå‡½æ•°æ˜¯ä¸€ä¸ªå‡½æ•°çš„å‚æ•°ï¼Œå¹¶ä¸”åœ¨è¿™ä¸ªå‡½æ•°é‡Œå¯ä»¥è°ƒç”¨è¿™ä¸ªå›è°ƒå‡½æ•°ï¼Œè‡³äºè¿™ä¸ªå›è°ƒå‡½æ•°ä»€ä¹ˆæ—¶å€™è°ƒç”¨ æœ‰çš„æ˜¯å¯ä»¥æŒ‡å®šè°ƒç”¨ æœ‰çš„æ˜¯æ»¡è¶³ç‰¹æ®Šè¦æ±‚åç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨</h3>
<p>ä»¥ä¸‹æ˜¯å›è°ƒå‡½æ•°çš„ä¸€äº›ä¾‹å­ æ¯ä¸ªéƒ½æœ‰ç›¸å…³çš„ç†è§£<br>
ä¾‹å­ä¸€</p>
<pre><code>function addSqua(num1, num2, callback){
  var sum = num1 + num2;
  return callback(sum);
}
function squa(num){
  return num*num;
}
let num = addSqua(1, 2, squa);    
console.log(num);
//è¾“å‡º9  
</code></pre>
<p>ä»¥ä¸Šå®šä¹‰äº† addSquaå‡½æ•° ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯callback  è°ƒç”¨æ—¶å€™å°†squaå‡½æ•°ä¼ å€¼ç»™äº†callback<br>
å¹¶ä¸” åœ¨returnå‰è°ƒç”¨äº†squaå‡½æ•°   å…¶å®æ˜¯ä¸¤å±‚å‡½æ•°<br>
ä¾‹å­äºŒ</p>
<pre><code>function doSomething(msg, callback){
    alert(msg);
    if(typeof callback == &quot;function&quot;) 
    callback();
 } 
doSomething(&quot;å›è°ƒå‡½æ•°&quot;, function(){
    alert(&quot;åŒ¿åå‡½æ•°å®ç°å›è°ƒ!&quot;);
 }); 
</code></pre>
<p>å£°æ˜å‡½æ•° doSomething  å‚æ•°msg  ç¬¬äºŒä¸ªå‚æ•°callbackçš„å£°æ˜åœ¨ä¸‹é¢è°ƒç”¨ doSometing çš„æ—¶å€™è¿›è¡Œ<br>
è¿™ä¸ªåŒ¿åå‡½æ•°ä¼ å€¼ç»™äº†callback</p>
<p>ä¾‹å­ä¸‰</p>
<pre><code>setTimeout({
  console.log(â€ä»£ç æ‰§è¡ŒåŒºâ€œ);
},ms)
</code></pre>
<p>setTimeout å…¸å‹çš„å›è°ƒå‡½æ•° æ­¤å¤„åœ¨msæ¯«ç§’å ç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨è¿™ä¸ªå‡½æ•° å½“ç„¶ç¬¬ä¸€ä¸ªå‚æ•°ä¹Ÿå¯ä»¥å†™æˆæŒ‡å‘è¦æ‰§è¡Œå‡½æ•°çš„å˜é‡. å‰ä¸¤ä¸ªä¾‹å­éƒ½æ˜¯è‡ªå·±è°ƒç”¨.<br>
ä¾‹å­å››ï¼ˆçœ‹Promiseæ—¶å€™æå…·è¿·æƒ‘ ä¸‰è¡Œä»£ç åˆ†æèµ·æ¥å´å¾ˆå¤š...ï¼‰</p>
<pre><code>function delay(ms) {
  return new Promise(resolve =&gt; setTimeout(resolve, ms));
}
delay(3000).then(() =&gt; alert('runs after 3 seconds'));
</code></pre>
<p>delayå£°æ˜åŒº<br>
é¦–å…ˆå£°æ˜delayå‡½æ•°å¸¦ä¸€ä¸ªå‚æ•°ms<br>
è¿”å›çš„æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ å…¶ä¸­å£°æ˜äº†ç¬¬ä¸€ä¸ªå‚æ•°resolve è°ƒç”¨setTiomeoutå‡½æ•°çš„å£°æ˜<br>
æ¥æ”¶ä¸¤ä¸ªå‚æ•° ä¸€ä¸ªæ˜¯å»¶è¿Ÿmsåå‘ç”Ÿå‘ç”Ÿçš„resolveå‡½æ•° å¦ä¸€ä¸ªæŒ‡å®šå»¶è¿Ÿæ—¶é—´<br>
delayè°ƒç”¨åŒº<br>
è°ƒç”¨delay(3000) æ­¤æ—¶å°†3000ä¼ å€¼ç»™ms è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ .then() å¼€å§‹è°ƒç”¨setTimeoutå‡½æ•°<br>
3så  resolveå›è°ƒå‡½æ•°æ‰§è¡Œ  ç®­å¤´å‡½æ•°è°ƒç”¨  æ— å‚æ•°æ‰§è¡Œalert('runs after 3 seconds')ï¼›</p>
<h2 id="æ€»ç»“">æ€»ç»“ï¼š</h2>
<p>å›è°ƒå‡½æ•°ä¸æ˜¯ç«‹å³æ‰§è¡Œ å®ƒéœ€è¦åœ¨åˆé€‚çš„æ—¶é—´è¿›è¡Œæ‰§è¡Œ  ä¸å¼‚æ­¥çš„ç†å¿µå»åˆ  å¼‚æ­¥ï¼šåŒæ—¶æ‰§è¡Œå¤šä¸ªå·¥ä½œ ä½†ä¸èƒ½ç¡®å®šæ¯ä¸ªå·¥ä½œå…·ä½“å®Œæˆçš„æ—¶é—´ï¼Œä¸€èˆ¬æ˜¯å®Œæˆå•ä¸ªå·¥ä½œåé‡‡ç”¨å›è°ƒå‡½æ•°æ¥è¿›è¡Œä¸‹ä¸€æ­¥çš„å¤„ç†ã€‚<br>
ä»¥ä¸Šåœ¨ä¸»å‡½æ•°ä¸­çš„å£°æ˜ä¸­ å›è°ƒå‡½æ•°ä»¥å‚æ•°å½¢å¼å­˜åœ¨  è‡³äºå›è°ƒå‡½æ•°å…·ä½“æ˜¯ä»€ä¹ˆå‡½æ•° çœ‹ä¼ å…¥çš„å€¼æ¥å†³å®š<br>
è€Œå®ƒçš„è¢«è°ƒç”¨æ‰§è¡Œçš„æ—¶æœº 1è‡ªå·±è°ƒç”¨ 2ç³»ç»Ÿè°ƒç”¨</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Es6ä¸­çš„Promiseå¯¹è±¡ ]]></title>
        <id>https://huyifu.github.io/post/es6-zhong-de-promise-dui-xiang/</id>
        <link href="https://huyifu.github.io/post/es6-zhong-de-promise-dui-xiang/">
        </link>
        <updated>2021-03-29T11:05:19.000Z</updated>
        <content type="html"><![CDATA[<p>å¼•è¨€ï¼šJSå¼‚æ­¥è§£å†³ ä½¿ç”¨Promiseå¯¹è±¡<br>
ä¹‹å‰å­¦ä¹ äº†node å¤§é‡ä½¿ç”¨Promise è™½ç„¶ä¼šç”¨äº† ä½†æ˜¯å¯¹å…¶äº†è§£è¿˜ä¸å¤Ÿæ·±å…¥<br>
Promise æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒä»£è¡¨äº†ä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆå®Œæˆæˆ–è€…å¤±è´¥ã€‚</p>
<h2 id="promiseå¯¹è±¡çš„ä½¿ç”¨">Promiseå¯¹è±¡çš„ä½¿ç”¨</h2>
<p>åˆ›å»ºï¼š<br>
Promise å¯¹è±¡çš„æ„é€ å™¨ï¼ˆconstructorï¼‰è¯­æ³•å¦‚ä¸‹ï¼š<br>
let promise = new Promise(function(resolve, reject) {<br>
//è¿›è¡Œå·¥ä½œ<br>
//åœ¨å·¥ä½œå®Œæˆåè¿›è¡Œ è¿™ä¸ªPromiseå¯¹è±¡çš„resolve or reject<br>
});<br>
//ç°åœ¨å¯ä»¥å¯ä»¥è¿›è¡Œå¯¹è¿™ä¸ªå¯¹è±¡çš„ä½¿ç”¨äº†<br>
è¿™ä¸ªå¯¹è±¡æœ‰ä¸‰ç§æ–¹æ³•è°ƒç”¨ then catch finally</p>
<ol>
<li>then<br>
æœ€é‡è¦æœ€åŸºç¡€çš„ä¸€ä¸ªå°±æ˜¯ .thenã€‚<br>
è¯­æ³•å¦‚ä¸‹ï¼š<br>
promise.then(<br>
function(result) { /* handle a successful result <em>/ },<br>
function(error) { /</em> handle an error */ }<br>
);<br>
å¦‚æœç”¨ç®­å¤´å‡½æ•°ä¹Ÿå¯ä»¥å†™æˆ<br>
promise.then(res =&gt; console.log('æˆåŠŸç»“æœ'), err =&gt; console.log('å¤±è´¥å¯¹è±¡'));<br>
.then çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å°†åœ¨ promise resolved åè¿è¡Œå¹¶æ¥æ”¶ç»“æœã€‚<br>
.then çš„ç¬¬äºŒä¸ªå‚æ•°ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å°†åœ¨ promise rejected åè¿è¡Œå¹¶æ¥æ”¶ errorã€‚<br>
ä¸€ä¸ªå®ä¾‹</li>
</ol>
<pre><code>function delay(ms) {
  return new Promise(resolve =&gt; setTimeout(resolve, ms));
}
delay(3000).then(() =&gt; alert('runs after 3 seconds'));
</code></pre>
<p>è¿”å›promiseå¯¹è±¡çš„å»¶æ—¶å‡½æ•°<br>
delayå£°æ˜ä¸­ resolveä½œä¸ºå‚æ•°  ç›´æ¥æ‰§è¡ŒsetTimeoutå‡½æ•° å¹¶åœ¨msæ¯«ç§’åæ‰§è¡Œ resolve()ï¼›</p>
<h2 id="promiseå£°æ˜çš„å¯¹è±¡ä¼šç«‹å³æ‰§è¡Œ">ï¼ˆpromiseå£°æ˜çš„å¯¹è±¡ä¼šç«‹å³æ‰§è¡Œï¼‰</h2>
<p>åœ¨delayå‡½æ•°å¼€å§‹è°ƒç”¨ ç„¶å3såæ‰§è¡Œå›è°ƒå‡½æ•°  æ— å‚  å³æ‰§è¡Œ function(){alert('runs after 3 seconds'));}<br>
2. catch<br>
å¦‚æœæˆ‘ä»¬åªå¯¹ error æ„Ÿå…´è¶£ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ null ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼š.then(null, errorHandlingFunction)ã€‚æˆ–è€…æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ .catch(errorHandlingFunction)<br>
promise.catch(err)<br>
let promise = new Promise((resolve, reject) =&gt; {<br>
setTimeout(() =&gt; reject(new Error(&quot;Whoops!&quot;)), 1000);<br>
});<br>
// .catch(f) ä¸ promise.then(null, f) ä¸€æ ·<br>
promise.catch(alert); // 1 ç§’åæ˜¾ç¤º &quot;Error: Whoops!&quot;<br>
3. finnally<br>
finally å¤„ç†ç¨‹åºï¼ˆhandlerï¼‰æ²¡æœ‰å‚æ•°ã€‚åœ¨ finally ä¸­ï¼Œæˆ‘ä»¬ä¸çŸ¥é“ promise æ˜¯å¦æˆåŠŸã€‚æ²¡å…³ç³»ï¼Œå› ä¸ºæˆ‘ä»¬çš„ä»»åŠ¡é€šå¸¸æ˜¯æ‰§è¡Œâ€œå¸¸è§„â€çš„å®šç¨¿ç¨‹åºï¼ˆfinalizing proceduresï¼‰ã€‚<br>
finally å¤„ç†ç¨‹åºå°†ç»“æœå’Œ error ä¼ é€’ç»™ä¸‹ä¸€ä¸ªå¤„ç†ç¨‹åºã€‚</p>
<p>ç”± new Promise æ„é€ å™¨è¿”å›çš„ promise å¯¹è±¡å…·æœ‰ä»¥ä¸‹å†…éƒ¨å±æ€§ï¼š<br>
state â€” æœ€åˆæ˜¯ &quot;pending&quot;ï¼Œç„¶ååœ¨ resolve è¢«è°ƒç”¨æ—¶å˜ä¸º &quot;fulfilled&quot;ï¼Œæˆ–è€…åœ¨ reject è¢«è°ƒç”¨æ—¶å˜ä¸º &quot;rejected&quot;ã€‚<br>
result â€” æœ€åˆæ˜¯ undefinedï¼Œç„¶ååœ¨ resolve(value) è¢«è°ƒç”¨æ—¶å˜ä¸º valueï¼Œæˆ–è€…åœ¨ reject(error) è¢«è°ƒç”¨æ—¶å˜ä¸º errorã€‚</p>
<h3 id="promiseçš„stateå±æ€§ä¸€æ—¦ç¡®å®šæ— æ³•ä¿®æ”¹">Promiseçš„stateå±æ€§ä¸€æ—¦ç¡®å®šæ— æ³•ä¿®æ”¹</h3>
<p>solve(1);<br>
reject(2);//æ­¤æ—¶æ— æ•ˆ</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[JS thisçš„æŒ‡å‘]]></title>
        <id>https://huyifu.github.io/post/js-this-de-zhi-xiang/</id>
        <link href="https://huyifu.github.io/post/js-this-de-zhi-xiang/">
        </link>
        <updated>2021-03-29T01:11:11.000Z</updated>
        <content type="html"><![CDATA[<p>å¼•è¨€ï¼šç›®å‰æŸ¥æ‰¾èµ„æ–™å’Œè‡ªå·±æ•´ç†çš„thisçš„ç†è§£<br>
thisçš„ç”±æ¥ï¼šå‡½æ•°å¯ä»¥åœ¨ä¸åŒç¯å¢ƒä¸‹æ‰§è¡Œï¼Œthisç”¨æ¥æŒ‡ä»£å½“å‰çš„æ‰§è¡Œç¯å¢ƒï¼Œå› æ­¤thiså°±æ˜¯æ‰§è¡Œç¯å¢ƒ<br>
é‚£ä¹ˆæ‰§è¡Œç¯å¢ƒæ˜¯ä»€ä¹ˆå‘¢</p>
<h2 id="æ‰§è¡Œç¯å¢ƒexecution-contextä¹Ÿç§°ä¸ºæ‰§è¡Œä¸Šä¸‹æ–‡æ˜¯javascriptä¸­æœ€ä¸ºé‡è¦çš„ä¸€ä¸ªæ¦‚å¿µ-æ‰§è¡Œç¯å¢ƒå®šä¹‰äº†å˜é‡æˆ–å‡½æ•°æœ‰æƒè®¿é—®çš„å…¶å®ƒæ•°æ®å†³å®šäº†å„è‡ªçš„è¡Œä¸º-å½“javascriptä»£ç æ‰§è¡Œçš„æ—¶å€™ä¼šè¿›å…¥ä¸åŒçš„æ‰§è¡Œç¯å¢ƒè¿™äº›ä¸åŒçš„æ‰§è¡Œç¯å¢ƒå°±æ„æˆäº†æ‰§è¡Œç¯å¢ƒæ ˆ">æ‰§è¡Œç¯å¢ƒ(Execution Contextï¼Œä¹Ÿç§°ä¸º&quot;æ‰§è¡Œä¸Šä¸‹æ–‡&quot;)æ˜¯JavaScriptä¸­æœ€ä¸ºé‡è¦çš„ä¸€ä¸ªæ¦‚å¿µã€‚æ‰§è¡Œç¯å¢ƒå®šä¹‰äº†å˜é‡æˆ–å‡½æ•°æœ‰æƒè®¿é—®çš„å…¶å®ƒæ•°æ®ï¼Œå†³å®šäº†å„è‡ªçš„è¡Œä¸ºã€‚å½“JavaScriptä»£ç æ‰§è¡Œçš„æ—¶å€™ï¼Œä¼šè¿›å…¥ä¸åŒçš„æ‰§è¡Œç¯å¢ƒï¼Œè¿™äº›ä¸åŒçš„æ‰§è¡Œç¯å¢ƒå°±æ„æˆäº†æ‰§è¡Œç¯å¢ƒæ ˆã€‚</h2>
<p>JavaScriptä¸­ä¸»è¦å­˜åœ¨ä¸‰ç§æ‰§è¡Œç¯å¢ƒ:</p>
<p>å…¨å±€æ‰§è¡Œç¯å¢ƒ<br>
ã€€ã€€ã€€JavaScriptä»£ç æ‰§è¡Œçš„é»˜è®¤ç¯å¢ƒã€‚é€šå¸¸è¢«é»˜è®¤ä¸ºwindowå¯¹è±¡ï¼Œæ‰€æœ‰çš„å…¨å±€å˜é‡å’Œå‡½æ•°éƒ½ä½œä¸ºwindowå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•å­˜åœ¨ã€‚å½“æ‰§è¡Œç¯å¢ƒä¸­çš„ä»£ç æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œæ‰§è¡Œç¯å¢ƒè¢«é”€æ¯ï¼Œå…¶ä¸­çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°ä¹Ÿéšä¹‹é”€æ¯ã€‚å¯¹äºå…¨å±€æ‰§è¡Œç¯å¢ƒæ¥è¯´ï¼Œå½“å…³é—­ç½‘é¡µæˆ–æµè§ˆå™¨æ—¶ï¼Œè¯¥ç¯å¢ƒè¢«é”€æ¯ã€‚</p>
<p>å‡½æ•°æ‰§è¡Œç¯å¢ƒ<br>
ã€€ã€€Â Â  å½“æ‰§è¡Œä¸€ä¸ªJavaScriptå‡½æ•°æ—¶ï¼Œå‡½æ•°çš„ç¯å¢ƒè¢«æ¨å…¥ç¯å¢ƒæ ˆä¸­ï¼Œæ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œæ ˆå°†æ‰§è¡Œç¯å¢ƒæ¨å‡ºï¼Œå°†æ§åˆ¶æƒè½¬äº¤ç»™ä¹‹å‰çš„æ‰§è¡Œç¯å¢ƒã€‚</p>
<p>Evalç¯å¢ƒ<br>
ã€€ã€€ã€€æ‰§è¡Œeval()å‡½æ•°æ—¶åˆ›å»ºã€‚</p>
<p>æ‰§è¡Œä¸Šä¸‹æ–‡æ˜¯ä»¥æ ˆï¼ˆä¸€ç§ LIFO çš„æ•°æ®ç»“æ„ï¼‰çš„æ–¹å¼è¢«å­˜æ”¾èµ·æ¥çš„ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼ˆExecution Context Stackï¼‰ã€‚<br>
åœ¨ JavaScript ä»£ç å¼€å§‹æ‰§è¡Œæ—¶ï¼Œé¦–å…ˆè¿›å…¥å…¨å±€ç¯å¢ƒï¼Œæ­¤æ—¶å…¨å±€ä¸Šä¸‹æ–‡è¢«åˆ›å»ºå¹¶å…¥æ ˆï¼Œä¹‹åå½“è°ƒç”¨å‡½æ•°æ—¶åˆ™è¿›å…¥ç›¸åº”çš„å‡½æ•°ç¯å¢ƒï¼Œæ­¤æ—¶ç›¸åº”å‡½æ•°ä¸Šä¸‹æ–‡è¢«åˆ›å»ºå¹¶å…¥æ ˆï¼Œå½“å¤„äºæ ˆé¡¶çš„æ‰§è¡Œä¸Šä¸‹æ–‡ä»£ç æ‰§è¡Œå®Œæ¯•åï¼Œåˆ™ä¼šå°†å…¶å‡ºæ ˆã€‚</p>
<h3 id="æ‰§è¡Œç¯å¢ƒå±æ€§é‡è¦çš„ä¸‰ç§-å˜é‡å¯¹è±¡-ä½œç”¨åŸŸé“¾-thisæŒ‡å‘">æ‰§è¡Œç¯å¢ƒå±æ€§é‡è¦çš„ä¸‰ç§ï¼š å˜é‡å¯¹è±¡ï¼Œ ä½œç”¨åŸŸé“¾ï¼Œ thisæŒ‡å‘</h3>
<h2 id="thisåªåœ¨è°ƒç”¨æ—¶æ‰èƒ½ç¡®å®šthisæŒ‡å‘çš„å¯¹è±¡åœ¨å£°æ˜æ—¶æ— æ³•ç¡®å®š">thisåªåœ¨è°ƒç”¨æ—¶æ‰èƒ½ç¡®å®šthisæŒ‡å‘çš„å¯¹è±¡ï¼Œåœ¨å£°æ˜æ—¶æ— æ³•ç¡®å®š</h2>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[MongoDB]]></title>
        <id>https://huyifu.github.io/post/mongodb/</id>
        <link href="https://huyifu.github.io/post/mongodb/">
        </link>
        <updated>2021-03-29T01:10:48.000Z</updated>
        <content type="html"><![CDATA[<p>1</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Node.js å­¦ä¹ ]]></title>
        <id>https://huyifu.github.io/post/nodejs-xue-xi/</id>
        <link href="https://huyifu.github.io/post/nodejs-xue-xi/">
        </link>
        <updated>2021-03-22T13:24:50.000Z</updated>
        <content type="html"><![CDATA[<h1 id="nodeä¸‰éƒ¨åˆ†">nodeä¸‰éƒ¨åˆ†</h1>
<p>å¼•å…¥requiredæ¨¡å—ï¼šæˆ‘ä»¬å¯ä»¥ä½¿ç”¨requireæŒ‡ä»¤æ¥è½½å…¥Node.jsæ¨¡å—ã€‚</p>
<p>åˆ›å»ºæœåŠ¡å™¨ï¼šæœåŠ¡å™¨å¯ä»¥ç›‘å¬å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œç±»ä¼¼äºApache ã€Nginxç­‰HTTPæœåŠ¡å™¨ã€‚</p>
<p>æ¥æ”¶è¯·æ±‚ä¸å“åº”è¯·æ±‚ï¼šæœåŠ¡å™¨å¾ˆå®¹æ˜“åˆ›å»ºï¼Œå®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨æµè§ˆå™¨æˆ–ç»ˆç«¯å‘é€HTTPè¯·æ±‚ï¼ŒæœåŠ¡å™¨æ¥æ”¶è¯·æ±‚åè¿”å›å“åº”æ•°æ®ã€‚</p>
<h3 id="nvmå’Œnpmå…³ç³»">nvmå’Œnpmå…³ç³»</h3>
<p>nvmï¼šnodejs ç‰ˆæœ¬ç®¡ç†å·¥å…·ã€‚<br>
ä¹Ÿå°±æ˜¯è¯´ï¼šä¸€ä¸ª nvm å¯ä»¥ç®¡ç†å¾ˆå¤š node ç‰ˆæœ¬å’Œ npm ç‰ˆæœ¬ã€‚<br>
nodejsï¼šåœ¨é¡¹ç›®å¼€å‘æ—¶çš„æ‰€éœ€è¦çš„ä»£ç åº“<br>
npmï¼šnodejs åŒ…ç®¡ç†å·¥å…·ã€‚<br>
åœ¨å®‰è£…çš„ nodejs çš„æ—¶å€™ï¼Œnpm ä¹Ÿä¼šè·Ÿç€ä¸€èµ·å®‰è£…ï¼Œå®ƒæ˜¯åŒ…ç®¡ç†å·¥å…·ã€‚<br>
nvm ç®¡ç† nodejs å’Œ npm çš„ç‰ˆæœ¬<br>
npm å¯ä»¥ç®¡ç† nodejs çš„ç¬¬ä¸‰æ–¹æ’ä»¶</p>
<h3 id="ä½¿ç”¨æ¨¡å—åŒ–å¼€å‘çš„åŸå› ">ä½¿ç”¨æ¨¡å—åŒ–å¼€å‘çš„åŸå› </h3>
<p>JS æ–‡ä»¶ä¾èµ–é—®é¢˜<br>
a.js-&gt;b.js-&gt;c.js  c.jsæ— æ³•å•ç‹¬ä½¿ç”¨<br>
å‘½åå†²çª<br>
c.js num=1 a.js num=2</p>
<h3 id="node-æ¨¡å—åŒ–å¼€å‘è§„èŒƒ">node æ¨¡å—åŒ–å¼€å‘è§„èŒƒ</h3>
<p>ä¸€ä¸ªjsæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å— æ¨¡å—å†…éƒ¨å˜é‡å‡½æ•°é»˜è®¤æƒ…å†µä¸‹åœ¨å¤–éƒ¨æ— æ³•å¾—åˆ°<br>
æ¨¡å—å†…éƒ¨ä½¿ç”¨exportså¯¹è±¡è¿›è¡Œæˆå‘˜å¯¼å‡º ä½¿ç”¨requireæ–¹æ³•å¯¼å…¥å…¶ä»–æ¨¡å—<br>
å¦ä¸€ç§æ–¹å¼<br>
module.exports.version = version;<br>
exportsæ˜¯module.exportsçš„åˆ«å æŒ‡å‘å¼•ç”¨å…³ç³» æŒ‡å‘åŒä¸€ä¸ªå¯¼å‡ºå¯¹è±¡<br>
å½“æŒ‡å‘ä¸åŒå¯¹è±¡ å¯¼å‡ºå¯¹è±¡æ˜¯moudule.exportså¯¹è±¡</p>
<h2 id="ç³»ç»Ÿæ¨¡å—">ç³»ç»Ÿæ¨¡å—</h2>
<p>ç³»ç»Ÿæ¨¡å— nodeè¿è¡Œç¯å¢ƒæä¾›çš„API<br>
PS: å›è°ƒå‡½æ•° ï¼ˆerrï¼Œdocï¼‰ =&gt; {}   å¦‚æœæˆåŠŸ erræ˜¯NULL ä¸æˆåŠŸæ˜¯ä¸€ä¸ªå¯¹è±¡</p>
<h3 id="fs-æ–‡ä»¶æ“ä½œ">fs æ–‡ä»¶æ“ä½œ</h3>
<p>å¼•å…¥ const fs = require('fs')<br>
è¯»å–<br>
fs.readFile('æ–‡ä»¶è·¯å¾„/æ–‡ä»¶åç§°',['æ–‡ä»¶ç¼–ç '],callback); ã€ã€‘ä»£è¡¨å¯é€‰å‚æ•°<br>
å†™å…¥<br>
fs.writeFile('æ–‡ä»¶è·¯å¾„/æ–‡ä»¶åç§°','æ•°æ®',callback);</p>
<h3 id="path-è·¯å¾„æ“ä½œ">path è·¯å¾„æ“ä½œ</h3>
<p>è·¯å¾„æ‹¼æ¥ ä¸åŒæ“ä½œç³»ç»Ÿè·¯å¾„åˆ†éš”ç¬¦ä¸ç»Ÿä¸€ windows / \  Linux /<br>
const path = require('path')<br>
const finalPath = path.join('a','b','c')<br>
finalPath -&gt;  a\b\c<br>
ç»“åˆ<br>
const fs = require('fs');<br>
const path = require('path');<br>
TIP ä½¿ç”¨__dirname  ï¼ˆä¸¤ä¸ªä¸‹åˆ’çº¿ï¼‰<br>
å½“å‰jsæ–‡ä»¶å½“å‰æ–‡ä»¶å¤¹çš„ç»å¯¹è·¯å¾„<br>
å› æ­¤è·¯å¾„å¯ä»¥è¡¨ç¤ºä¸º  path.join(__dirname, 'xx.js')   join ä¼šè‡ªåŠ¨æ·»åŠ <br>
fs.readFile()</p>
<p>TIP:</p>
<h3 id="ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„">ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„</h3>
<p>ç»å¤§éƒ¨åˆ†ä½¿ç”¨ç»å¯¹è·¯å¾„   å› ä¸ºç›¸å¯¹è·¯å¾„æ˜¯ç›¸å¯¹çš„å‘½ä»¤è¡Œå·¥å…·çš„å½“å‰å·¥ä½œç›®å½•<br>
è¯»å–æ–‡ä»¶ è®¾ç½®æ–‡ä»¶è·¯å¾„ ç»å¯¹è·¯å¾„</p>
<h2 id="ç¬¬ä¸‰æ–¹æ¨¡å—">ç¬¬ä¸‰æ–¹æ¨¡å—</h2>
<p>ä¸‰æ–¹æ¨¡å— ä¸¤ç§å½¢å¼<br>
ä»¥jsæ–‡ä»¶å­˜åœ¨ æä¾›APIæ¥å£  -&gt; å…·ä½“åŠŸèƒ½<br>
å‘½ä»¤è¡Œå·¥å…·å½¢å¼å­˜åœ¨ è¾…åŠ©é¡¹ç›®å¼€å‘</p>
<h3 id="ä¸‰æ–¹æ¨¡å—-nodemon-å‘½ä»¤è¡Œå·¥å…·">ä¸‰æ–¹æ¨¡å— nodemon å‘½ä»¤è¡Œå·¥å…·</h3>
<p>cmd å¯ä»¥æ‰§è¡Œ ä½†æ˜¯vsç»ˆç«¯æ— æ³•æ‰§è¡Œï¼Ÿï¼Ÿ</p>
<h3 id="nrm">nrm</h3>
<p>npmä¸‹è½½åœ°å€åˆ‡æ¢å·¥å…·<br>
npmé»˜è®¤ä¸‹è½½åœ°å€ npmjs.com<br>
å›½å†…ä¸‹è½½åœ°å€æœåŠ¡å™¨åŒæ­¥ npm.taobao.org<br>
æŸ¥è¯¢ä¸‹è½½åœ°å€åˆ—è¡¨ nrm ls<br>
åˆ‡æ¢npmä¸‹è½½åœ°å€ nrm use ä¸‹è½½åœ°å€</p>
<p>TIP:<br>
clear æ¸…å±   ä¸Šç®­å¤´ ä¸Šä¸€æ¬¡å‘½ä»¤ ä¸‹ç®­å¤´ ä¸‹ä¸€æ¬¡å‘½ä»¤<br>
ctrl C ç»ˆæ­¢æ“ä½œ</p>
<h3 id="gulp">Gulp</h3>
<p>åŸºäºnodeå¹³å°å¼€å‘çš„å‰ç«¯æ„å»ºå·¥å…·<br>
å°†æœºæ¢°åŒ–æ“ä½œå˜æˆå‘½ä»¤</p>
<p>åŠŸèƒ½<br>
HTML CSS JS å‹ç¼©åˆå¹¶<br>
è¯­æ³•è½¬æ¢ es6 ..less..<br>
ä¿®æ”¹æ–‡ä»¶æµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°<br>
ä½¿ç”¨</p>
<p>1ä½¿ç”¨npm install gulpä¸‹è½½gulpåº“æ–‡ä»¶<br>
ï¼ˆå‘½ä»¤è¡Œå½“å‰æ–‡ä»¶ä¸‹é…ç½®å¥½äº† node_modulesæ–‡ä»¶å¤¹å’Œpackage-lock.json)<br>
2åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹å»ºç«‹gulpfile.jsæ–‡ä»¶<br>
ï¼ˆå‘½åå›ºå®šäº†ï¼‰<br>
3é‡æ„é¡¹ç›®çš„æ–‡ä»¶å¤¹ç»“æ„ srcç›®å½•æ”¾ç½®æºä»£ç æ–‡ä»¶ distç›®å½•æ”¾ç½®æ„å»ºåæ–‡ä»¶<br>
4åœ¨gulpfile.jsæ–‡ä»¶ä¸­ç¼–å†™ä»»åŠ¡.<br>
5åœ¨å‘½ä»¤è¡Œå·¥å…·ä¸­æ‰§è¡Œgulpä»»åŠ¡</p>
<p>æ–¹æ³•<br>
gulp.src() è·å–ä»»åŠ¡è¦å¤„ç†çš„æ–‡ä»¶<br>
gulp.dest() è¾“å‡ºæ–‡ä»¶<br>
gulp.task() å»ºç«‹gulpä»»åŠ¡<br>
gulp.watch() ç›‘è€ƒæ–‡ä»¶å˜åŒ–</p>
<p>gulp.task('ä»»åŠ¡çš„åç§°',() =&gt;{<br>
}) ;</p>
<p>gulp-cli  å‘½åè¡Œå·¥å…·<br>
æ‰§è¡Œä»»åŠ¡  é¡¹ç›®æ ¹ç›®å½• gulp ä»»åŠ¡åç§°<br>
Gulpæ’ä»¶<br>
gulp-htmlmin: html æ–‡ä»¶å‹ç¼©</p>
<pre><code>// htmlå‹ç¼©ä»»åŠ¡
// htmlæ–‡ä»¶ä¸­ä»£ç çš„å‹ç¼©æ“ä½œ
// æŠ½å–htmlæ–‡ä»¶ä¸­çš„å…¬å…±ä»£ç 
const htmlmin = require('gulp-htmlmin');
const fileinClude = require('gulp-file-include');
gulp.task('htmlmin',()=&gt;{
    //*. æ‰€æœ‰çš„æ–‡ä»¶
    gulp.src('./src/*.html')
        //æŠ½å–æ”¾å…¥commonæ–‡ä»¶å¤¹
        .pipe(fileinClude())
       //å‹ç¼©
      .pipe(htmlmin({collapseWhitespace: true}))
      .pipe(gulp.dest('dist'));
});
</code></pre>
<p>@@include('./common/head.html')<br>
å°†å…¬å…±ä»£ç å¼•å…¥è¿›æ¥<br>
gulp-csso :å‹ç¼©css<br>
gulp-file-include å…¬å…±æ–‡ä»¶åŒ…å«<br>
.....</p>
<p>æ„å»ºä»»åŠ¡<br>
TIP å½“ä»»åŠ¡å–åä¸ºdefult gulpå‘½ä»¤ç›´æ¥è¿è¡Œ gulp defult<br>
gulp.task('defult',['ä»»åŠ¡ä¸€åå­—','ä»»åŠ¡äºŒåå­—'],....)</p>
<h3 id="packagejson">package.json</h3>
<p>ï¼ˆ1ï¼‰node_modulesæ–‡ä»¶å¤¹çš„é—®é¢˜<br>
æ–‡ä»¶å¤¹ä»¥åŠæ–‡ä»¶è¿‡å¤šè¿‡ç¢ï¼Œå½“æˆ‘ä»¬å°†é¡¹ç›®æ•´ä½“æ‹·è´ç»™åˆ«äººçš„æ—¶å€™,ï¼Œä¼ è¾“é€Ÿåº¦ä¼šå¾ˆæ…¢å¾ˆæ…¢.<br>
å¤æ‚çš„æ¨¡å—ä¾èµ–å…³ç³»éœ€è¦è¢«è®°å½•ï¼Œç¡®ä¿æ¨¡å—çš„ç‰ˆæœ¬å’Œå½“å‰ä¿æŒä¸€è‡´ï¼Œå¦åˆ™ä¼šå¯¼è‡´å½“å‰é¡¹ç›®è¿è¡ŒæŠ¥é”™<br>
ï¼ˆ2ï¼‰package.jsonæ–‡ä»¶çš„ä½œç”¨<br>
é¡¹ç›®æè¿°æ–‡ä»¶ï¼Œè®°å½•äº†å½“å‰é¡¹ç›®ä¿¡æ¯ï¼Œä¾‹å¦‚é¡¹ç›®åç§°ã€ç‰ˆæœ¬ã€ä½œè€…ã€githubåœ°å€ã€å½“å‰é¡¹ç›®ä¾èµ–äº†å“ªäº›ç¬¬ä¸‰æ–¹æ¨¡å—ç­‰ã€‚<br>
ä½¿ç”¨npm init -yå‘½ä»¤ç”Ÿæˆã€‚  -yå…¨å¡«é»˜è®¤å€¼<br>
ï¼ˆ3ï¼‰é¡¹ç›®ä¾èµ–<br>
åœ¨é¡¹ç›®çš„å¼€å‘é˜¶æ®µå’Œçº¿ä¸Šè¿è¥é˜¶æ®µï¼Œéƒ½éœ€è¦ä¾èµ–çš„ç¬¬ä¸‰æ–¹åŒ…ï¼Œç§°ä¸ºé¡¹ç›®ä¾èµ–<br>
ä½¿ç”¨npm install åŒ…åå‘½ä»¤ä¸‹è½½çš„æ–‡ä»¶ä¼šé»˜è®¤è¢«æ·»åŠ åˆ° package.json æ–‡ä»¶çš„ dependencies å­—æ®µä¸­<br>
{<br>
&quot;dependencies&quot;: {<br>
&quot;jquery&quot;: &quot;^3.3.1â€œ<br>
}<br>
}<br>
ï¼ˆ4ï¼‰å¼€å‘ä¾èµ–<br>
åœ¨é¡¹ç›®çš„å¼€å‘é˜¶æ®µéœ€è¦ä¾èµ–ï¼Œçº¿ä¸Šè¿è¥é˜¶æ®µä¸éœ€è¦ä¾èµ–çš„ç¬¬ä¸‰æ–¹åŒ…ï¼Œç§°ä¸ºå¼€å‘ä¾èµ–<br>
ä½¿ç”¨npm install åŒ…å --save-devå‘½ä»¤å°†åŒ…æ·»åŠ åˆ°package.jsonæ–‡ä»¶çš„devDependencieså­—æ®µä¸­<br>
{<br>
&quot;devDependencies&quot;: {<br>
&quot;gulp&quot;: &quot;^3.9.1â€œ<br>
}<br>
}<br>
5ï¼‰package-lock.jsonæ–‡ä»¶çš„ä½œç”¨<br>
é”å®šåŒ…çš„ç‰ˆæœ¬ï¼Œç¡®ä¿å†æ¬¡ä¸‹è½½æ—¶ä¸ä¼šå› ä¸ºåŒ…ç‰ˆæœ¬ä¸åŒè€Œäº§ç”Ÿé—®é¢˜<br>
åŠ å¿«ä¸‹è½½é€Ÿåº¦ï¼Œå› ä¸ºè¯¥æ–‡ä»¶ä¸­å·²ç»è®°å½•äº†é¡¹ç›®æ‰€ä¾èµ–ç¬¬ä¸‰æ–¹åŒ…çš„æ ‘çŠ¶ç»“æ„å’ŒåŒ…çš„ä¸‹è½½åœ°å€ï¼Œé‡æ–°å®‰è£…æ—¶åªéœ€ä¸‹è½½å³å¯ï¼Œä¸éœ€è¦åšé¢å¤–çš„å·¥ä½œ</p>
<p>npm install --production åªå®‰è£…é¡¹ç›®ä¾èµ–<br>
npm install  å…¨éƒ¨</p>
<p>TIPï¼š<br>
package.json<br>
&quot;scripts&quot;:{<br>
&quot;å‘½ä»¤åˆ«å&quot; : &quot;å‘½ä»¤ä»£ç &quot;<br>
}<br>
cmd æ•²å…¥ npm run åˆ«å   å³å¯è¿è¡Œ</p>
<h3 id="node-æ¨¡å—åŠ è½½æœºåˆ¶">Node æ¨¡å—åŠ è½½æœºåˆ¶</h3>
<ol>
<li>å½“æ¨¡å—æ‹¥æœ‰è·¯å¾„ä½†æ²¡æœ‰åç¼€<br>
requireæ–¹æ³•æ ¹æ®æ¨¡å—è·¯å¾„æŸ¥æ‰¾æ¨¡å—ï¼Œå¦‚æœæ˜¯å®Œæ•´è·¯å¾„ï¼Œç›´æ¥å¼•å…¥æ¨¡å—ã€‚<br>
å¦‚æœæ¨¡å—åç¼€çœç•¥ï¼Œå…ˆæ‰¾åŒåJSæ–‡ä»¶å†æ‰¾åŒåJSæ–‡ä»¶å¤¹<br>
å¦‚æœæ‰¾åˆ°äº†åŒåæ–‡ä»¶å¤¹ï¼Œæ‰¾æ–‡ä»¶å¤¹ä¸­çš„index.js<br>
å¦‚æœæ–‡ä»¶å¤¹ä¸­æ²¡æœ‰index.jså°±ä¼šå»å½“å‰æ–‡ä»¶å¤¹ä¸­çš„package.jsonæ–‡ä»¶ä¸­æŸ¥æ‰¾mainé€‰é¡¹ä¸­çš„å…¥å£æ–‡ä»¶<br>
å¦‚æœæ‰¾æŒ‡å®šçš„å…¥å£æ–‡ä»¶ä¸å­˜åœ¨æˆ–è€…æ²¡æœ‰æŒ‡å®šå…¥å£æ–‡ä»¶å°±ä¼šæŠ¥é”™ï¼Œæ¨¡å—æ²¡æœ‰è¢«æ‰¾åˆ°</li>
<li>æ¨¡å—æ²¡æœ‰è·¯å¾„æ²¡æœ‰åç¼€<br>
å‡è®¾å®ƒæ˜¯ç³»ç»Ÿæ¨¡å—<br>
node_moudulesæ–‡ä»¶ä¸­<br>
åŒåjsæ–‡ä»¶<br>
åŒåæ–‡ä»¶å¤¹<br>
åŒåæ–‡ä»¶å¤¹é‡Œé¢çš„index.js<br>
package.json mainé€‰é¡¹çš„å…¥å£æ–‡ä»¶</li>
</ol>
<h3 id="nodeå…¨å±€å¯¹è±¡">Nodeå…¨å±€å¯¹è±¡</h3>
<p>Nodeå…¨å±€å¯¹è±¡ global  â€”â€”æµè§ˆå™¨å…¨å±€å¯¹è±¡ window<br>
globalå¯¹è±¡é‡Œ æœ‰<br>
console.log<br>
setTimeout<br>
...<br>
ç­‰ç­‰æ–¹æ³•</p>
<h2 id="æœåŠ¡å™¨å¼€å‘">æœåŠ¡å™¨å¼€å‘</h2>
<p>###ï¼ˆ1ï¼‰æœåŠ¡å™¨ç«¯åŸºç¡€æ¦‚å¿µ<br>
ç½‘ç«™çš„ç»„æˆ<br>
ç½‘ç«™åº”ç”¨ç¨‹åºä¸»è¦åˆ†ä¸ºä¸¤å¤§éƒ¨åˆ†ï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ã€‚<br>
å®¢æˆ·ç«¯ï¼šåœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„éƒ¨åˆ†ï¼Œå°±æ˜¯ç”¨æˆ·çœ‹åˆ°å¹¶ä¸ä¹‹äº¤äº’çš„ç•Œé¢ç¨‹åºã€‚ä½¿ç”¨HTMLã€CSSã€JavaScriptæ„å»ºã€‚<br>
æœåŠ¡å™¨ç«¯ï¼šåœ¨æœåŠ¡å™¨ä¸­è¿è¡Œçš„éƒ¨åˆ†ï¼Œè´Ÿè´£å­˜å‚¨æ•°æ®å’Œå¤„ç†åº”ç”¨é€»è¾‘ã€‚</p>
<p>Nodeç½‘ç«™æœåŠ¡å™¨</p>
<p>èƒ½å¤Ÿæä¾›ç½‘ç«™è®¿é—®æœåŠ¡çš„æœºå™¨å°±æ˜¯ç½‘ç«™æœåŠ¡å™¨ï¼Œå®ƒèƒ½å¤Ÿæ¥æ”¶å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œèƒ½å¤Ÿå¯¹è¯·æ±‚åšå‡ºå“åº”ã€‚</p>
<p>IPåœ°å€<br>
äº’è”ç½‘ä¸­è®¾å¤‡çš„å”¯ä¸€æ ‡è¯†ã€‚<br>
IPæ˜¯Internet Protocol Addressçš„ç®€å†™ï¼Œä»£è¡¨äº’è”ç½‘åè®®åœ°å€.</p>
<p>åŸŸå<br>
ç”±äºIPåœ°å€éš¾äºè®°å¿†ï¼Œæ‰€ä»¥äº§ç”Ÿäº†åŸŸåçš„æ¦‚å¿µï¼Œæ‰€è°“åŸŸåå°±æ˜¯å¹³æ—¶ä¸Šç½‘æ‰€ä½¿ç”¨çš„ç½‘å€ã€‚<br>
http://www.baidu.com =&gt; http://124.165.219.100/ (ä¹±å†™çš„)<br>
è™½ç„¶åœ¨åœ°å€æ ä¸­è¾“å…¥çš„æ˜¯ç½‘å€, ä½†æ˜¯æœ€ç»ˆè¿˜æ˜¯ä¼šå°†åŸŸåè½¬æ¢ä¸ºipæ‰èƒ½è®¿é—®åˆ°æŒ‡å®šçš„ç½‘ç«™æœåŠ¡å™¨ã€‚</p>
<p>ç«¯å£<br>
ç«¯å£æ˜¯è®¡ç®—æœºä¸å¤–ç•Œé€šè®¯äº¤æµçš„å‡ºå£ï¼Œç”¨æ¥åŒºåˆ†æœåŠ¡å™¨ç”µè„‘ä¸­æä¾›çš„ä¸åŒçš„æœåŠ¡ã€‚</p>
<p>URL</p>
<p>ç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼Œåˆå«URLï¼ˆUniform Resource Locatorï¼‰ï¼Œæ˜¯ä¸“ä¸ºæ ‡è¯†Internetç½‘ä¸Šèµ„æºä½ç½®è€Œè®¾çš„ä¸€ç§ç¼–å€æ–¹å¼ï¼Œæˆ‘ä»¬å¹³æ—¶æ‰€è¯´çš„ç½‘é¡µåœ°å€æŒ‡çš„å³æ˜¯URLã€‚</p>
<p>URLçš„ç»„æˆ</p>
<p>ä¼ è¾“åè®®://æœåŠ¡å™¨IPæˆ–åŸŸå:ç«¯å£/èµ„æºæ‰€åœ¨ä½ç½®æ ‡è¯†<br>
tipï¼šé»˜è®¤80ç«¯å£ æ²¡æœ‰è®¾ç½®ç«¯å£è‡ªåŠ¨è®¾ç½®80ç«¯å£<br>
https://me.csdn.net/wuyxinu</p>
<p>httpï¼šè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œæä¾›äº†ä¸€ç§å‘å¸ƒå’Œæ¥æ”¶HTMLé¡µé¢çš„æ–¹æ³•ã€‚</p>
<p>å¼€å‘è¿‡ç¨‹ä¸­å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯è¯´æ˜</p>
<p>åœ¨å¼€å‘é˜¶æ®µï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä½¿ç”¨åŒä¸€å°ç”µè„‘ï¼Œå³å¼€å‘äººå‘˜ç”µè„‘ã€‚</p>
<p>æœ¬æœºåŸŸåï¼šlocalhost<br>
æœ¬åœ°IP ï¼š127.0.0.1<br>
###ï¼ˆ2ï¼‰åˆ›å»ºwebæœåŠ¡å™¨</p>
<p>// å¼•ç”¨ç³»ç»Ÿæ¨¡å—<br>
const http = require('http');<br>
// åˆ›å»ºwebæœåŠ¡å™¨<br>
const app = http.createServer();<br>
// å½“å®¢æˆ·ç«¯å‘é€è¯·æ±‚çš„æ—¶å€™<br>
req è¯·æ±‚  resè¿”å›</p>
<pre><code> app.on('request', (req, res) =&gt; {
        //  å“åº”
       res.end('&lt;h1&gt;hi, user&lt;/h1&gt;');
 });
  // ç›‘å¬3000ç«¯å£
 app.listen(3000);
 console.log('æœåŠ¡å™¨å·²å¯åŠ¨ï¼Œç›‘å¬3000ç«¯å£ï¼Œè¯·è®¿é—® localhost:3000')
</code></pre>
<h3 id="3httpåè®®">(3)HTTPåè®®</h3>
<p>ï¼ˆ1ï¼‰HTTPåè®®çš„æ¦‚å¿µ<br>
è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆè‹±æ–‡ï¼šHyperText Transfer Protocolï¼Œç¼©å†™ï¼šHTTPï¼‰è§„å®šäº†å¦‚ä½•ä»ç½‘ç«™æœåŠ¡å™¨ä¼ è¾“è¶…æ–‡æœ¬åˆ°æœ¬åœ°æµè§ˆå™¨ï¼Œå®ƒåŸºäºå®¢æˆ·ç«¯æœåŠ¡å™¨æ¶æ„å·¥ä½œï¼Œæ˜¯å®¢æˆ·ç«¯ï¼ˆç”¨æˆ·ï¼‰å’ŒæœåŠ¡å™¨ç«¯ï¼ˆç½‘ç«™ï¼‰è¯·æ±‚å’Œåº”ç­”çš„æ ‡å‡†ã€‚<br>
ï¼ˆ2ï¼‰æŠ¥æ–‡<br>
åœ¨HTTPè¯·æ±‚å’Œå“åº”çš„è¿‡ç¨‹ä¸­ä¼ é€’çš„æ•°æ®å—å°±å«æŠ¥æ–‡ï¼ŒåŒ…æ‹¬è¦ä¼ é€çš„æ•°æ®å’Œä¸€äº›é™„åŠ ä¿¡æ¯ï¼Œå¹¶ä¸”è¦éµå®ˆè§„å®šå¥½çš„æ ¼å¼ã€‚<br>
ï¼ˆ3ï¼‰è¯·æ±‚æŠ¥æ–‡<br>
TIP: æ§åˆ¶å° Network å¯ä»¥çœ‹åˆ°è¯·æ±‚å’Œç›¸åº”ç›¸å…³ä¿¡æ¯<br>
è¯·æ±‚æ–¹å¼ ï¼ˆRequest Methodï¼‰<br>
GET è¯·æ±‚æ•°æ®<br>
POST å‘é€æ•°æ®<br>
è¯·æ±‚åœ°å€ ï¼ˆRequest URLï¼‰<br>
app.on('request', (req, res) =&gt; {<br>
req.headers  // è·å–è¯·æ±‚æŠ¥æ–‡<br>
req.url      // è·å–è¯·æ±‚åœ°å€<br>
req.method   // è·å–è¯·æ±‚æ–¹æ³•<br>
});<br>
locallhost è¯·æ±‚<br>
favicon.ico è¯·æ±‚<br>
éƒ½ä¸ºGETæ–¹å¼  æµè§ˆå™¨è®¿é—®æœåŠ¡å™¨ GETé»˜è®¤æ–¹å¼è¯·æ±‚ï¼Ÿ</p>
<pre><code> &lt;form method=&quot;post&quot; action=&quot;http://localhost:3000&quot;&gt;
    &lt;input type=&quot;submit&quot; name=&quot;submit&quot;&gt;
    &lt;/form&gt;
</code></pre>
<p>è®¾ç½® postè¯·æ±‚ æäº¤è·³è½¬åˆ°æœåŠ¡å™¨ æ–¹å¼POST</p>
<p>req.url  /index  /homepage ....<br>
åŒæ—¶/favicon.ico è¯·æ±‚åœ°å€åŒæ ·å­˜åœ¨<br>
é»˜è®¤ url '/'</p>
<p>req.headers['accept']  å–å€¼accept<br>
(4)å“åº”æŠ¥æ–‡<br>
1 HTTPçŠ¶æ€ç <br>
200 è¯·æ±‚æˆåŠŸ<br>
404 è¯·æ±‚çš„èµ„æºæ²¡æœ‰è¢«æ‰¾åˆ°<br>
500 æœåŠ¡å™¨ç«¯æœ‰é”™è¯¯<br>
400 å®¢æˆ·ç«¯è¯·æ±‚è¯­æ³•æœ‰é”™è¯¯</p>
<p>response.writeHead(statusCode, [reasonPhrase], [headers])<br>
2 å†…å®¹ç±»å‹<br>
text/html<br>
text/css<br>
application/javascript<br>
..</p>
<p>GET è¯·æ±‚å‚æ•°<br>
http://localhost:3000/?name=xx&amp;age=20  ï¼ˆé”®å€¼å¯¹ï¼‰</p>
<p>å†…ç½®æ¨¡å—<br>
url æ¨¡å— ç”¨äºå¤„ç†urlåœ°å€<br>
url.parseï¼ˆurlåœ°å€ï¼Œtrueï¼‰;<br>
parseå¯¹è±¡é‡Œ<br>
query æŸ¥è¯¢å‚æ•°å¯¹è±¡<br>
pathname  è·¯å¾„å­—ç¬¦ä¸²<br>
ç¬¬ä¸€ä¸ªå‚æ•° è§£æçš„åœ°å€ ç¬¬äºŒä¸ªå‚æ•° æ˜¯å¦å°†æŸ¥è¯¢å‚æ•°è§£ææˆå¯¹è±¡<br>
åº”ç”¨ let params = url.parse(req.url,true).query;<br>
http://localhost:3000/?name=xx&amp;age=20  ï¼ˆé”®å€¼å¯¹ï¼‰<br>
æ­¤æ—¶ params {name:xx,age:20} å¯¹è±¡<br>
å¯ä»¥å–å¾—å€¼ params.name  -&gt;xx ...</p>
<h3 id="server_getjs">server_GET.js</h3>
<pre><code>let http = require('http');
let url = require('url');
//åˆ›å»ºæœåŠ¡å™¨
let server = http.createServer();
//ä¸ºserverå¯¹è±¡æ·»åŠ ç›‘å¬äº‹ä»¶ äº‹ä»¶åç§°ä¸ºrequest
server.on('request', (req,res) =&gt;{
    res.writeHead(200,{
        'content-type': 'text/html;charset=utf8'
    });
    //æµ‹è¯•http://localhost:3000/homepage?name=huyifu&amp;age=20
  let {query, pathname} = url.parse(req.url,true);
  console.log(query);
  console.log(pathname);
  //parseå·²ç»è¢«å¼ƒç”¨ä½†æ˜¯è¿˜èƒ½ä½¿ç”¨
  /* è¿˜æ²¡å­¦ä¹ æ€ä¹ˆä½¿ç”¨ urléœ€è¦å®Œæ•´IPåœ°å€
  const NewUrl = new URL(req.url);
    console.log(req.url);*/
   if (pathname == '/homepage' || pathname == '/')
    res.end('&lt;h1&gt;æ¬¢è¿æ¥åˆ°é¦–é¡µ&lt;/h1&gt;');
    else if (pathname == '/personPage')
    res.end('&lt;h1&gt;æ¬¢è¿æ¥åˆ°ä¸ªäººä¸»é¡µ&lt;/h1&gt;');
    else
    res.end('Not Found');
});
//ç›‘å¬3000ç«¯å£
server.listen(3000);
console.log('æœåŠ¡å™¨å·²å¯åŠ¨ï¼Œç›‘å¬3000ç«¯å£ï¼Œæœ¬åœ°å¯è®¿é—®');
</code></pre>
<p>ä½¿ç”¨æ¨¡å—querystring  å¤„ç†è¯·æ±‚å‚æ•°æ¨¡å—<br>
æ–¹æ³• querystring.parse è½¬ä¸ºå¯¹è±¡</p>
<p>post å‚æ•°æ˜¯é€šè¿‡äº‹ä»¶çš„æ–¹å¼æ¥å—çš„<br>
POST è¯·æ±‚çš„å†…å®¹å…¨éƒ¨çš„éƒ½åœ¨è¯·æ±‚ä½“ä¸­ï¼Œhttp.ServerRequest å¹¶æ²¡æœ‰ä¸€ä¸ªå±æ€§å†…å®¹ä¸ºè¯·æ±‚ä½“ï¼ŒåŸå› æ˜¯ç­‰å¾…è¯·æ±‚ä½“ä¼ è¾“å¯èƒ½æ˜¯ä¸€ä»¶è€—æ—¶çš„å·¥ä½œã€‚<br>
data å½“è¯·æ±‚å‚æ•°ä¼ é€’æ—¶å€™è§¦å‘dataäº‹ä»¶<br>
end å½“å‚æ•°ä¼ é€’å®Œæˆæ—¶å€™è§¦å‘endäº‹ä»¶</p>
<h3 id="server_postjs">server_POST.js</h3>
<pre><code>let http = require('http');
let url = require('url');
let querystring = require('querystring');
var util = require('util');
http.createServer(function(req, res){
    // å®šä¹‰äº†ä¸€ä¸ªpostå˜é‡ï¼Œç”¨äºæš‚å­˜è¯·æ±‚ä½“çš„ä¿¡æ¯
    var post = '';     
    // é€šè¿‡reqçš„dataäº‹ä»¶ç›‘å¬å‡½æ•°ï¼Œæ¯å½“æ¥å—åˆ°è¯·æ±‚ä½“çš„æ•°æ®ï¼Œå°±ç´¯åŠ åˆ°postå˜é‡ä¸­
    req.on('data', function(chunk){    
        post += chunk;
    });
    // åœ¨endäº‹ä»¶è§¦å‘åï¼Œé€šè¿‡querystring.parseå°†postè§£æä¸ºçœŸæ­£çš„POSTè¯·æ±‚æ ¼å¼ï¼Œç„¶åå‘å®¢æˆ·ç«¯è¿”å›ã€‚
    req.on('end', function(){    
        post = querystring.parse(post);
        res.end(util.inspect(post));
    });
    res.writeHead(200, {'Content-Type': 'text/html; charset=utf8'});
    res.end('ok!');
}).listen(3000);

console.log('æœåŠ¡å™¨å·²å¯åŠ¨ï¼Œç›‘å¬3000ç«¯å£ï¼Œæœ¬åœ°å¯è®¿é—®');
</code></pre>
<p>é™æ€èµ„æº<br>
æœåŠ¡å™¨ä¸éœ€è¦ä»»ä½•å¤„ç†çš„èµ„æº  åƒå›¾ç‰‡ æ–‡ä»¶ç­‰ç­‰<br>
åŠ¨æ€èµ„æº<br>
ç›¸åŒçš„è¯·æ±‚åœ°å€ä¸åŒçš„å“åº”èµ„æº  éœ€è¦æœåŠ¡å™¨è¿›è¡Œå¤„ç†</p>
<h2 id="é™æ€èµ„æºçš„è·å–">é™æ€èµ„æºçš„è·å–</h2>
<p>app.js<br>
éœ€è¦åšåˆ°åœ¨æœåŠ¡å™¨ä¸Šè¯·æ±‚è·¯å¾„åå“åº”å¯¹åº”çš„é™æ€èµ„æºè®¿é—® å¦‚ä¸€ä¸ªhtmlé¡µé¢<br>
ï¼ˆé¡¹ç›®æ ¹ç›®å½•ä¸‹æ”¾publicæ–‡ä»¶ é‡Œé¢æ˜¯css js htmlæ–‡ä»¶ï¼‰<br>
å¦‚è®¿é—®http://localhost:3000/index.html?key=0<br>
1 å¼•å…¥æ¨¡å—<br>
http æœåŠ¡å™¨ url æœåŠ¡å™¨ä¸Šè·å–è¯·æ±‚è·¯å¾„ path å¯¹è·¯å¾„è¿›è¡Œå¤„ç† fs å¯¹æ–‡ä»¶è¯»å–æ¥è¿›è¡Œ æœåŠ¡å™¨çš„å“åº”-&gt;æŒ‡htmlæ–‡ä»¶<br>
2 æœåŠ¡å™¨å¯¹è±¡è®¾ç½®ç›‘å¬å¯¹è±¡ åœ¨å›è°ƒå‡½æ•°é‡Œè¿›è¡Œå¤„ç†<br>
3 è·å–è¯·æ±‚è·¯å¾„<br>
4 å°†è¯·æ±‚è·¯å¾„è½¬å˜ä¸ºæœåŠ¡å™¨è®¿é—®é™æ€èµ„æºçš„ç»å¯¹è·¯å¾„<br>
5 é€šè¿‡è¿™ä¸ªç»å¯¹è·¯å¾„è¿›è¡Œè¯»å– å¹¶å“åº”</p>
<p>é‡åˆ°çš„é—®é¢˜<br>
1.æ‰€æœ‰ä¸­æ–‡ä¹±ç 2.æ‰€æœ‰å›¾ç‰‡åŠ è½½ä¸å‡º 3éœ€è¦å°†url '/'ä¹Ÿå¯¼è¿›é¦–é¡µ '/index'<br>
åŸå› ï¼š<br>
ç¼–ç æ ¼å¼æ²¡è®¾ç½® å¯¼è‡´ä¹±ç <br>
åœ¨å“åº”çš„htmlä¸­ è¿›è¡Œå¯¹css .js .jpj .png ç­‰ç­‰èµ„æºå†æ¬¡è¯·æ±‚    ä½†æ˜¯æ–‡ä»¶æ ¼å¼æ²¡æœ‰è®¾ç½® å¯¼è‡´é”™è¯¯<br>
è§£å†³æ–¹æ³•<br>
åœ¨html  headåŒºåŠ å…¥<meta charset="UTF-8"><br>
å¼•å…¥mimeæ¨¡å— å¯¹è¯·æ±‚è·¯å¾„è§£æå‡ºèµ„æºçš„æ ¼å¼ å¹¶æ ¹æ®æ ¼å¼åœ¨res.writeHeadä¸Šæ·»åŠ ä¸ŠçŠ¶æ€ç å’Œæ ¼å¼<br>
mime.getType(path)<br>
å¯¹urlè¿›è¡Œparseæˆå¯¹è±¡ é‡Œé¢çš„pathnameè¿›è¡Œåˆ†æ<br>
pathname = pathname =='/' ? '/index.html' : pathname  ä¸‰å…ƒè¿ç®—ç¬¦è¿›è¡Œè½¬æ¢</p>
<p>app.js ä»£ç å¦‚ä¸‹</p>
<pre><code>const http = require('http');
const url = require('url');
const path = require('path');
const fs = require('fs');
const mime = require('mime');
var times=1;
/*1 å¼•å…¥æ¨¡å—
http æœåŠ¡å™¨ url æœåŠ¡å™¨ä¸Šè·å–è¯·æ±‚è·¯å¾„ path å¯¹è·¯å¾„è¿›è¡Œå¤„ç† fs å¯¹æ–‡ä»¶è¯»å–æ¥è¿›è¡Œ æœåŠ¡å™¨çš„å“åº”-&gt;æŒ‡htmlæ–‡ä»¶
2 æœåŠ¡å™¨å¯¹è±¡è®¾ç½®ç›‘å¬å¯¹è±¡ åœ¨å›è°ƒå‡½æ•°é‡Œè¿›è¡Œå¤„ç†
3 è·å–è¯·æ±‚è·¯å¾„ 
4 å°†è¯·æ±‚è·¯å¾„è½¬å˜ä¸ºæœåŠ¡å™¨è®¿é—®é™æ€èµ„æºçš„ç»å¯¹è·¯å¾„
5 é€šè¿‡è¿™ä¸ªç»å¯¹è·¯å¾„è¿›è¡Œè¯»å– å¹¶å“åº”*/
//http://localhost:3000/index.html?key=0
let app = http.createServer();
app.on('request',(req,res)=&gt;{
    let request_path = req.url;
    let url_obj=url.parse(request_path,true);
    let pathname=url_obj.pathname;
    pathname = pathname  == '/' ? '/index.html':pathname;
    let realPath = path.join(__dirname,'ä»¿å†™å°ç±³',pathname);
    let type = mime.getType(realPath);
    console.log(times+'æ¬¡:'+realPath);
    times++;
    fs.readFile(realPath,(err,data)=&gt;{
         if (err) //è‹¥è¯»å–å¤±è´¥erræ˜¯ä¸€ä¸ªå¯¹è±¡ boolå€¼ä¸ºtrue
         {
            console.log('æ–‡ä»¶è¯»å–å¤±è´¥,é”™è¯¯æ˜¯ï¼š'+err);
            res.writeHead(404,{'content-type':'text/html;charset=utf8'});
            res.end('æ–‡ä»¶è¯»å–å¤±è´¥');
            return;
         }
            res.writeHead(200,{'content-type': type});
            res.end(data);
            //console.log(data);
    });
   //res.end('ok');
});
app.listen(3000);
console.log(&quot;æœåŠ¡å™¨å·²ç»å¯åŠ¨ 3000ç«¯å£&quot;);
</code></pre>
<h2 id="åŒæ­¥ä¸å¼‚æ­¥">åŒæ­¥ä¸å¼‚æ­¥</h2>
<p>åŒæ­¥API åªæœ‰å½“APIæ‰§è¡Œå®Œæˆå æ‰èƒ½ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªAPI<br>
å¼‚æ­¥API å½“å‰APIçš„æ‰§è¡Œä¸ä¼šé˜»å¡åç»­ä»£ç çš„æ‰§è¡Œ</p>
<pre><code>function getMsg (callback){
    setTimeout(function(){
        callback({
            msg: 'hello'
        });
    },2000);
}
getMsg(function (data){
    console.log(data);
});
</code></pre>
<p>1 å®šä¹‰äº†getMsgå‡½æ•° å‚æ•°ä¸ºcallbackå‡½æ•°<br>
2 åœ¨ä¸‹å¤„æ‰§è¡Œäº†getMsgå‡½æ•° å‚æ•°ä¸ºå‡½æ•° å£°æ˜äº†callbackå‡½æ•°<br>
3 åœ¨getMsgå‡½æ•°é‡Œ å¼‚æ­¥API setTimeoutå‡½æ•° 2såæ‰§è¡Œ<br>
4 æ­¤æ—¶è°ƒç”¨callbackå‡½æ•° å‚æ•°ä¸ºä¸€ä¸ªå¯¹è±¡<br>
5 æ‰§è¡Œcallbackå‡½æ•° console.log è¿™ä¸ªå¯¹è±¡ å±æ€§msgå€¼ä¸º 'hello'å­—ç¬¦ä¸²</p>
<h3 id="ä»£ç æ‰§è¡Œé¡ºåº">ä»£ç æ‰§è¡Œé¡ºåº</h3>
<p>åˆ†ä¸º åŒæ­¥ä»£ç æ‰§è¡ŒåŒº å¼‚æ­¥ä»£ç æ‰§è¡ŒåŒº å›è°ƒå‡½æ•°é˜Ÿåˆ—<br>
é¦–å…ˆä¼šå°†ä»£ç åˆ†åŒºåŸŸ  åŒæ­¥ä»£ç æ‰§è¡Œå’Œå›è°ƒå‡½æ•°éƒ½æ˜¯è‡ªä¸Šè€Œä¸‹å…ˆå<br>
å¼‚æ­¥ä»£ç æ‰§è¡ŒåŒºåˆ™æ— æ³•ç¡®å®šé¡ºåº å…ˆæ‰§è¡Œå®Œæˆçš„å…ˆè¿›è¡Œå›è°ƒå‡½æ•°æ‰§è¡Œ<br>
æ‰§è¡Œé¡ºåºä¸ºå…ˆæ‰§è¡Œå®Œæ‰€æœ‰çš„åŒæ­¥ä»£ç <br>
ç„¶åè¿›è¡Œå¼‚æ­¥ä»£ç æ‰§è¡ŒåŒº    ä¹‹åæ‰§è¡Œå›è°ƒå‡½æ•°<br>
ç»å…¸ä¾‹å­</p>
<pre><code>for (var i = 0; i &lt;= 5; i++) {
    setTimeout(function() {
        console.log( i );
    }, i*1000);
     console.log( ' i : ' , i );
}
console.log( i );
</code></pre>
<p>è¾“å‡º<br>
i:0<br>
i:1<br>
i:2<br>
i:3<br>
i:4<br>
i:5<br>
6<br>
6 0så ä¹‹ä¸Šéƒ½æ˜¯ç¬é—´è¾“å‡º<br>
6 1så<br>
6 2så<br>
6 3så<br>
6 4så<br>
6 5så</p>
<p>æ­¤æ—¶è¿˜æœ‰é—­åŒ…é—®é¢˜ å°†varæ”¹æˆlet</p>
<pre><code>for (var i = 0; i &lt;= 5; i++) {
    setTimeout(function() {
        console.log( i );
    }, i*1000);
     console.log( ' i : ' , i );
}
console.log( i );
</code></pre>
<p>è¾“å‡º<br>
i:0<br>
i:1<br>
i:2<br>
i:3<br>
i:4<br>
i:5<br>
6<br>
0 0så ä¹‹ä¸Šéƒ½æ˜¯ç¬é—´è¾“å‡º<br>
1 1så<br>
2 2så<br>
3 3så<br>
4 4så<br>
5 5så<br>
è¿™ä¸¤ä¸ªä¾‹å­ å¯ä»¥æ ¹æ®ä¸Šæ–‡çš„ä»£ç æ‰§è¡Œé¡ºåºè¿›è¡Œè§£é‡Š<br>
å…ˆæ‰§è¡ŒåŒæ­¥åŒºæ‰€æœ‰ä»£ç  ç„¶åè¿›è¡Œå¼‚æ­¥åŒºä»£ç </p>
<p>node js å¼‚æ­¥API<br>
fs<br>
äº‹ä»¶å¤„ç†å‡½æ•°<br>
...</p>
<p>å¼‚æ­¥APIåé¢ä»£ç çš„æ‰§è¡Œä¾èµ–å½“å‰å¼‚æ­¥APIçš„æ‰§è¡Œç»“æœ éœ€è¦ç¡®å®šå¥½æ‰§è¡Œé¡ºåº<br>
åœ¨å›è°ƒå‡½æ•°é‡Œè°ƒç”¨å›è°ƒå‡½æ•°<br>
å¯¼è‡´é—®é¢˜ å›è°ƒåœ°ç‹±  ä¸æ˜“ç»´æŠ¤ä¿®æ”¹</p>
<h2 id="è§£å†³æ–¹æ³•-promise">è§£å†³æ–¹æ³• Promise</h2>
<h2 id="promisejs">Promise.js</h2>
<pre><code>const fs = require('fs');
/* å›è°ƒåœ°ç‹± ä¸æ˜“ç»´æŠ¤
fs.readFile('./1.text','utf8',(err,result1)=&gt;{
     console.log(result1);
     fs.readFile('./2.text','utf8',(err,result2)=&gt;{
        console.log(result2);
        fs.readFile('./3.text','utf8',(err,result3)=&gt;{
            console.log(result3);
       });
   });
});
*/
function file1(){
    return new Promise((resolve,reject)=&gt;{
        fs.readFile('./1.text','utf8',(err,result)=&gt;{
             if (err)
             reject(err);
             else
             resolve(result);
        })
    });
}
function file2(){
    return new Promise((resolve,reject)=&gt;{
        fs.readFile('./2.text','utf8',(err,result)=&gt;{
             if (err)
             reject(err);
             else
             resolve(result);
        })
    });
}
function file3(){
    return new Promise((resolve,reject)=&gt;{
        fs.readFile('./3.text','utf8',(err,result)=&gt;{
             if (err)
             reject(err);
             else
             resolve(result);
        })
    });
}
//å‡½æ•°return promiseå¯¹è±¡ å¯ä»¥é“¾å¼è°ƒç”¨
file1().then((r1)=&gt;{
    console.log(r1);
    return file2(); //æ­¤æ—¶return f2çš„promiseå¯¹è±¡
})
.then((r2)=&gt;{
    console.log(r2);
    return file3();
})
.then((r3)=&gt;{
    console.log(r3);
})
</code></pre>
<h2 id="å¼‚æ­¥å‡½æ•°-åœ¨promiseå¯¹è±¡ä¸Šè¿›è¡Œå°è£…">å¼‚æ­¥å‡½æ•° åœ¨promiseå¯¹è±¡ä¸Šè¿›è¡Œå°è£…</h2>
<p>æ˜¯ç»ˆæè§£å†³æ–¹æ¡ˆ ä½¿å¾—å¼‚æ­¥ä»£ç å†™æˆåŒæ­¥çš„å½¢å¼ è®©ä»£ç ä¸å†æœ‰å›è°ƒå‡½æ•°çš„åµŒå¥—<br>
async<br>
1 åœ¨æ™®é€šå‡½æ•°å®šä¹‰çš„å‰é¢åŠ ä¸Šasyncå…³é”®å­— æ™®é€šå‡½æ•°å°±å˜æˆäº†å¼‚æ­¥å‡½æ•°<br>
2 å¼‚æ­¥å‡½æ•°é»˜è®¤çš„è¿”å›å€¼æ˜¯promiseå¯¹è±¡<br>
3 å¼‚æ­¥å‡½æ•°å†…éƒ¨ä½¿ç”¨throwè¿›è¡Œé”™è¯¯æŠ›å‡º  returnè¿”å›data (resolve)<br>
4 thenæ–¹æ³•   catchæ–¹æ³•<br>
await<br>
1 åªèƒ½å†™åœ¨å¼‚æ­¥å‡½æ•°ä¸­<br>
2 await promise  åé¢åªèƒ½å†™promiseå¯¹è±¡<br>
3 await æš‚åœå¼‚æ­¥å‡½æ•°å‘ä¸‹æ‰§è¡Œ ç›´åˆ°promiseå¯¹è±¡è¿”å›ç»“æœ</p>
<p>åº”ç”¨  fs.readFile ç”±äºæ— æ³•è¿”å›promiseå¯¹è±¡ æ— æ³•ä½¿ç”¨awaitå…³é”®å­—<br>
è§£å†³æ–¹æ³•<br>
å¼•å…¥util æ¨¡å—çš„promisifyæ–¹æ³•<br>
æ­¤æ–¹æ³•æ¥æ”¶ éœ€è¦æ”¹é€ çš„å‡½æ•°ä½œä¸ºå‚æ•°<br>
const fs = require('fs');<br>
const util = require('util');<br>
const NewReadFile = (util.promisify)(fs.readFile); //æ”¹é€ è¿”å›æ–°çš„æ–¹æ³•</p>
<h2 id="asyncfunctionjs">asyncFunction.js</h2>
<pre><code>/*async function fn(){
    return 'success and DATA:...';
    throw 'error!';
}
fn().then(data=&gt;console.log(data));
//fn().catch(error=&gt;console.log(error));
*/
const fs = require('fs');
const util = require('util');
const NewReadFile = (util.promisify)(fs.readFile); //æ”¹é€ è¿”å›æ–°çš„æ–¹æ³•

async function run(){
  let r1= await NewReadFile('./1.text','utf8');
  let r2= await NewReadFile('./2.text','utf8');
  let r3= await NewReadFile('./3.text','utf8');
  console.log(r1);
  console.log(r2);
  console.log(r3);
}
run();
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ä¼ªç±»ä¸ä¼ªå…ƒç´ ]]></title>
        <id>https://huyifu.github.io/post/wei-lei-yu-wei-yuan-su/</id>
        <link href="https://huyifu.github.io/post/wei-lei-yu-wei-yuan-su/">
        </link>
        <updated>2021-03-18T13:50:43.000Z</updated>
        <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯ä¼ªç±»">ä»€ä¹ˆæ˜¯ä¼ªç±»ï¼Ÿ</h2>
<p>â€”â€”ä¼ªç±»æ˜¯é€‰æ‹©å™¨çš„ä¸€ç§ï¼Œå®ƒç”¨äºé€‰æ‹©å¤„äºç‰¹å®šçŠ¶æ€çš„å…ƒç´ ã€‚<br>
ä¼ªç±»æœ‰å¾ˆå¤šç§ï¼Œå®ƒä»¬éƒ½ä¸ºæˆ‘ä»¬æä¾›äº†åŸºäºå…¶ç‰¹å¾æ— æ³•è®¿é—®æˆ–éš¾ä»¥è®¿é—®çš„ç‰¹å¾æ¥å®šä½å…ƒç´ çš„æ–¹æ³•ã€‚<br>
ä¼ªç±»çš„ç±»å‹ï¼š</p>
<ol>
<li>åŠ¨æ€ä¼ªç±»<br>
:hover :focus :link  :visited</li>
<li>åŸºäºçŠ¶æ€çš„ä¼ªç±»<br>
:checkedå¯ä»¥åº”ç”¨äºå¤é€‰æ¡†ï¼ˆï¼‰<br>
:fullscreen å®šä½å½“å‰ä»¥å…¨å±æ¨¡å¼æ˜¾ç¤ºçš„ä»»ä½•å…ƒç´ </li>
<li>ç»“æ„ä¼ªç±»<br>
:first-childï¼Œ:last-child</li>
<li>æ‚é¡¹ä¼ªç±»<br>
:not(x)é€‰æ‹©ä¸é€‰æ‹©å™¨xä¸åŒ¹é…çš„å…ƒç´    :lang(language-code) é€‰æ‹©å“ªäº›å†…å®¹é‡‡ç”¨ç‰¹å®šè¯­è¨€çš„å…ƒç´ </li>
</ol>
<h2 id="ä»€ä¹ˆæ˜¯ä¼ªå…ƒç´ ">ä»€ä¹ˆæ˜¯ä¼ªå…ƒç´ ï¼Ÿ</h2>
<p>â€”â€”ä¼ªå…ƒç´ ç”¨äºåˆ›å»ºä¸€äº›ä¸åœ¨æ–‡æ¡£æ ‘ä¸­çš„å…ƒç´ ï¼Œå¹¶ä¸ºå…¶æ·»åŠ æ ·å¼ã€‚<br>
ps:åˆ©ç”¨ä¼ªå…ƒç´ æ’å…¥çš„dom åœ¨domç»“æ„ä¸­æ˜¯çœ‹ä¸åˆ°çš„ ä¸è¿‡å¯ä»¥åœ¨css ä¸­çœ‹åˆ°<br>
::before/::after/::first-letter/::first-line/::selection ........</p>
<h2 id="åŒºåˆ«">åŒºåˆ«ï¼š</h2>
<p>ä¼ªç±»çš„æ“ä½œå¯¹è±¡æ˜¯æ–‡æ¡£æ ‘ä¸­å·²æœ‰çš„å…ƒç´ ï¼Œè€Œä¼ªå…ƒç´ åˆ™åˆ›å»ºäº†ä¸€ä¸ªæ–‡æ¡£æ•°å¤–çš„å…ƒç´ ã€‚<br>
æœ‰æ²¡æœ‰åˆ›å»ºä¸€ä¸ªæ–‡æ¡£æ ‘ä¹‹å¤–çš„å…ƒç´ ã€‚</p>
<p>å…ƒç´ æŒ‡çš„æ˜¯ HTML æ–‡æ¡£ä¸­çš„æ ‡ç­¾ï¼Œå®ƒæ˜¯ DOM æ ‘çš„ä¸€éƒ¨åˆ†ã€‚è€Œç±»æ˜¯å…ƒç´ ä¸Šçš„ä¸€ä¸ªå±æ€§ï¼Œæ˜¯äººä¸ºè§„å®šçš„å½“å‰å…ƒç´ çš„ä¸€ä¸ªç±»åˆ«ã€‚</p>
<h1 id="æ€»ç»“">æ€»ç»“ï¼š</h1>
<ul>
<li>ä¼ªç±»ä¸è¢«æ ‡è®°çš„å…ƒç´ æ˜¯ä¸€ç§åŒ…å«å…³ç³»ï¼Œç±»æ·»åŠ åˆ°äº†è¿™ä¸ªå…ƒç´ ä¸Š</li>
<li>ä¼ªå…ƒç´ ä¸è¢«è¢«æ ‡è®°çš„å…ƒç´ æ˜¯åŒçº§å…³ç³»ï¼Œcssæœ€ç»ˆä¼šä½œç”¨åœ¨è¿™ä¸ªåˆ›é€ å‡ºçš„ä¼ªå…ƒç´ çš„ä½ç½®ä¸Š</li>
</ul>
]]></content>
    </entry>
</feed>